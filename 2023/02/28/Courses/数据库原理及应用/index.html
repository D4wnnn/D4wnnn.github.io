

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/avatar.jpg">
  <link rel="icon" href="/img/avatar.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="D4wn">
  <meta name="keywords" content="后端,博客,网络安全,爬虫,D4wn,d4wnnn,脚本,Selenium,计算机网络,操作系统">
  
    <meta name="description" content="数据库原理及应用 学堂在线：https:&#x2F;&#x2F;www.xuetangx.com&#x2F;learn&#x2F;EST08091001150&#x2F;EST08091001150&#x2F;14767710&#x2F;video&#x2F;30164527?channel&#x3D;i.area.learn_title 尚硅谷MySQL：MySQL数据库教程天花板，mysql安装到mysql高级，强！硬！_哔哩哔哩_bilibili 数据库应用原理(强推！)：">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库原理及应用">
<meta property="og:url" content="https://d4wnnn.github.io/2023/02/28/Courses/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8/index.html">
<meta property="og:site_name" content="D4wn">
<meta property="og:description" content="数据库原理及应用 学堂在线：https:&#x2F;&#x2F;www.xuetangx.com&#x2F;learn&#x2F;EST08091001150&#x2F;EST08091001150&#x2F;14767710&#x2F;video&#x2F;30164527?channel&#x3D;i.area.learn_title 尚硅谷MySQL：MySQL数据库教程天花板，mysql安装到mysql高级，强！硬！_哔哩哔哩_bilibili 数据库应用原理(强推！)：">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://d4wnnn.github.io/img/mysql.jpg">
<meta property="article:published_time" content="2023-02-28T02:50:45.000Z">
<meta property="article:modified_time" content="2024-05-07T19:47:41.848Z">
<meta property="article:author" content="D4wn">
<meta property="article:tag" content="数据库原理及应用">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://d4wnnn.github.io/img/mysql.jpg">
  
  
  
  <title>数据库原理及应用 - D4wn</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/bynotes/texiao/source/css/shubiao.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"d4wnnn.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":false,"baidu":"104d1c240fe4777ab966bd68252f7714","google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?104d1c240fe4777ab966bd68252f7714";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', '');
        });
      }
    </script>
  

  

  

  

  



  
<meta name="generator" content="Hexo 7.2.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>D4wn</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/total.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="数据库原理及应用"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        D4wn
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-02-28 10:50" pubdate>
          2023年2月28日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          12k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          101 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">数据库原理及应用</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="数据库原理及应用">数据库原理及应用</h1>
<p>学堂在线：https://www.xuetangx.com/learn/EST08091001150/EST08091001150/14767710/video/30164527?channel=i.area.learn_title</p>
<p>尚硅谷MySQL：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1iq4y1u7vj/?spm_id_from=333.337.search-card.all.click&amp;vd_source=bf133d296119691c661008e881da330a">MySQL数据库教程天花板，mysql安装到mysql高级，强！硬！_哔哩哔哩_bilibili</a></p>
<p>数据库应用原理(强推！)：https://www.bilibili.com/video/BV1tm4y1w7Sz?t=369.2</p>
<h2 id="考试重点">考试重点</h2>
<blockquote>
<p>群公告：</p>
<p>期末重点： SQL编程--难度类似实验测评 关系模型---概念、关系运算
CDM设计---根据题目给出的需求，画出PD格式的CDM图
PDM设计---课件4-4数据库规范化设计 ODBC---概念、分级、方法
JDBC----概念、分级、编程 存储过程、触发器----难度类似实验
第七章考核点：cap base 5v 四种nosql数据库类型和分类比较</p>
</blockquote>
<h2 id="一数据库系统概论">一、数据库系统概论</h2>
<h3 id="数据库及其系统概念">1.1 数据库及其系统概念</h3>
<blockquote>
<p>数据库：</p>
<ul>
<li>是一种依照特定数据模型组织，存储和管理数据的文件集合</li>
</ul>
<p>数据库和普通数据文件的主要区别：</p>
<ul>
<li>可以支持不同应用对数据的共享访问，普通数据文件难以支持</li>
<li>可以实现复杂的数据管理</li>
<li>可以独立应用程序，普通数据文件和应用程序紧耦合</li>
<li>数据库的操作访问和控制管理由数据库管理系统软件实现，普通的文件都必须让应用程序实现</li>
</ul>
<p>数据模型：</p>
<ul>
<li>是指描述事物对象的数据结构组成，数据语义关系，数据约束的抽象结构及其说明</li>
<li>用白话文理解：就是把现实世界转换成计算机能理解的形式，能够被计算机理解或者说实现</li>
</ul>
<p>数据模型的组成：</p>
<ul>
<li><p>数据结构：描述事物对象的静态特征，包括事物对象的数据组成，数据类型，数据性质</p></li>
<li><p>数据操作：用于描述事物对象的动态特征，比如增删改查</p></li>
<li><p>数据约束：描述数据之间的制约和依存关系</p>
<p>实际就是相当于虚拟世界的规则，限定实体的规则叫实体完整性，限定联系的规则为参照完整性，针对属性列的规则称为用户自定义完整性</p></li>
</ul>
<p>数据模型的分类：</p>
<ul>
<li>概念模型：可以理解为画图</li>
<li>逻辑模型：可看作把概念模型画的图转化成二维表</li>
<li>物理模型：是对数据最底层的抽象，描述数据在系统内部的表示方法，一般我们不关心</li>
</ul>
<p>常见的数据模型：</p>
<ul>
<li><p>层次数据模型：最早使用，采用树存储管理数据</p></li>
<li><p>网状数据模型：采用网状图存储管理数据</p></li>
<li><p>关系数据模型：实际就是个二维表在组织和管理数据</p>
<p>优点：</p>
<ul>
<li>数据结构简单，操作灵活</li>
<li>支持关系与集合运算操作</li>
<li>支持SQL标准</li>
<li>拥有众多的软件厂商产品与用户</li>
</ul>
<p>局限：</p>
<ul>
<li>只用于结构化数据的组织与存储管理</li>
<li>支持的数据类型较简单</li>
<li>难以支持互联网广泛应用的非结构化数据和复杂数据管理</li>
</ul></li>
</ul>
<p>数据库系统的组成：</p>
<ul>
<li>用户</li>
<li>数据库管理系统</li>
<li>数据库</li>
<li>数据库应用程序</li>
</ul>
</blockquote>
<h3 id="数据库技术发展">1.2 数据库技术发展</h3>
<blockquote>
<p>数据管理技术发展阶段</p>
<ul>
<li>人工管理阶段</li>
<li>文件系统管理阶段</li>
<li>数据库系统管理阶段
<ul>
<li>第一代数据库技术</li>
<li>第二代数据库技术</li>
<li>第三代数据库技术</li>
<li>第四代数据库技术</li>
</ul></li>
</ul>
</blockquote>
<h3 id="数据库系统的结构">1.3 数据库系统的结构</h3>
<blockquote>
<p>业务处理系统：比如航空机票订票系统</p>
<p>管理信息系统：比如人力资源管理信息系统，办公管理信息系统</p>
<p>决策支持系统：比如证券分析与辅助决策信息系统</p>
<p>数据库系统应用结构：</p>
<ul>
<li>单用户结构</li>
<li>集中式结构</li>
<li>分布式结构</li>
<li>客户/服务器结构</li>
</ul>
<p>数据库应用系统生命周期：</p>
<ul>
<li>需求分析</li>
<li>系统设计</li>
<li>系统实现</li>
<li>系统测试</li>
<li>系统运行与维护</li>
</ul>
</blockquote>
<h3 id="典型数据库管理系统">1.4 典型数据库管理系统</h3>
<blockquote>
<p>常见数据库</p>
<ul>
<li><p>Oracle</p></li>
<li><p>MySQL</p></li>
<li><p>SQLite：常用在小型数据库</p></li>
<li><p>DB2：常用在银行系统中</p></li>
<li><p>PostgreSQL：稳定性极强</p></li>
<li><p>MariaDB：因为MySQL有闭源的风险，所以有MariaDB分支项</p></li>
</ul>
<p>按用途分类：</p>
<ul>
<li>通用DBMS：支持公共领域数据，如SQL server</li>
<li>专用领域DBMS：支持专用领域数据库，如嵌入式的SQLite</li>
</ul>
<p>按用户数分类：</p>
<ul>
<li>单用户DBMS：仅支持单用户访问，如miniSQL</li>
<li>多用户DBMS：支持多用户并行，如MySQL</li>
</ul>
<p>按系统部署分类：</p>
<ul>
<li>集中式DBMS：数据库集中部署在单一物理机器中，如Access</li>
<li>分布式DBMS：数据库可分布在不同位置的物理机器，如Oracle Database</li>
</ul>
<p>按使用场景分类：</p>
<ul>
<li>桌面级DBMS：适用于微小型的信息服务应用：Access，SQLite</li>
<li>企业级DBMS：适用于中大型企业，如Oracle，DB2</li>
</ul>
<p>按软件版权分类：</p>
<ul>
<li>产品DBMS：数据库厂商拥有版权，比如SQL server，Oracle</li>
<li>开源DBMS：如MySQL，PostgreSQL</li>
</ul>
</blockquote>
<h2 id="二数据库关系模型">二、数据库关系模型</h2>
<h3 id="关系及其相关概念">2.1 关系及其相关概念</h3>
<blockquote>
<p>其实不管什么模型，都可以分成三点来理解。因为数据模型是对计算机模拟出来的世界，跟真实世界是一一对应的。初看很抽象，但一旦和物理世界结合起来就不难理解了。首先是数据结构，里面有数据的各种定义，然后是数据操纵，就是增删改查，最后是完整性约束，也就是即使在真实世界中，也不能随意的增删改查，需要有一定的规则</p>
<p>什么是关系数据模型？</p>
<ul>
<li>是一种基于二维表结构存储数据实体及实体间联系的数据模型</li>
</ul>
<p>下面将从3方面介绍下关系数据模型</p>
<ul>
<li><p>关系模型的数据结构(相关概念)：</p>
<ul>
<li><p>实体：是指包含有数据特征的事务对象在概念数据模型世界中的抽象名称</p></li>
<li><p>关系：是指具有关系特征、用于存放实体数据的<code>二维表</code></p></li>
<li><p>元组：表中的一行</p></li>
<li><p>键：也称码，指的是表中的某个属性可以唯一确定一个元组</p></li>
<li><p>候选键：当有多个键时，称这个属性组或者属性组字面的所有字段为候选键</p></li>
<li><p>主键：是关系表中最具代表性的一个候选键，每个关系表只能定义一个主键</p></li>
<li><p>代理键：DBMS自动生成的数字序列作为关系表的主键，可替代复合主键，提高效率</p></li>
<li><p>主属性：候选码的属性</p></li>
<li><p>关系模式：对关系的描述--&gt;<code>关系名(属性1，属性2...属性n)</code>.如何理解关系模式呢，可以这么理解它，不同数据库比如mysql，postgresql，oracle等，关系模式可以让所有人一眼就能看出来想传达的是什么，可以说是一种格式，或者说框架。其实前面的是一种简化的写法，完整的写法应该如下<code>关系名(属性名集合U，U中属性来自的域D，属性向域的映射集合DOM，属性间数据的依赖关系的集合)</code></p></li>
<li><p>关系的特征：</p>
<ul>
<li><p>表中每行存储实体的一个实例数据</p></li>
<li><p>表中每列包含实体的一个属性信息</p></li>
<li><p>表中单元格只能存储单个值</p></li>
<li><p>不允许有重复行/列</p></li>
<li><p>行/列顺序任意</p></li>
</ul></li>
</ul></li>
<li><p>关系模型的数据操作</p>
<ul>
<li><p>t关系代数运算符的分类</p>
<ul>
<li>集合运算符：并交差和笛卡尔积</li>
<li>专门的关系运算符：选择，投影，连接，除</li>
</ul></li>
<li><p>运算符详细解释：</p>
<ul>
<li><p>并<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.403ex" role="img" focusable="false" viewbox="0 -598 667 620"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"/></g></g></g></svg></mjx-container></span>：R和S的属性个数相同，并且对应的属性应该取自同一个域，结果由属于R或者S的元组构成
<span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="25.273ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 11170.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(981.2,0)"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"/></g><g data-mml-node="mi" transform="translate(1870.4,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(2793.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(3849,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"/></g><g data-mml-node="mi" transform="translate(4349,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(4710,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(4988,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(5626.8,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(6571.6,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(7552.8,0)"><path data-c="2228" d="M55 580Q56 587 61 592T75 598Q86 598 96 580L333 48L570 580Q579 596 586 597Q588 598 591 598Q609 598 611 580Q611 574 546 426T415 132T348 -15Q343 -22 333 -22T318 -15Q317 -14 252 131T121 425T55 580Z"/></g><g data-mml-node="mi" transform="translate(8442,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(9080.8,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(10025.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(10670.6,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"/></g></g></g></svg></mjx-container></span></p></li>
<li><p>差<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.505ex" role="img" focusable="false" viewbox="0 -583 778 665"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g></g></g></svg></mjx-container></span>：R和S的属性个数相同，并且对应的属性应该取自同一个域，结果由属于R但不属于S的元组构成
<span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="25.524ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 11281.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(981.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(1981.4,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(2904.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(3960,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"/></g><g data-mml-node="mi" transform="translate(4460,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(4821,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(5099,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(5737.8,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(6682.6,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(7663.8,0)"><path data-c="2227" d="M318 591Q325 598 333 598Q344 598 348 591Q349 590 414 445T545 151T611 -4Q609 -22 591 -22Q588 -22 586 -21T581 -20T577 -17T575 -13T572 -9T570 -4L333 528L96 -4Q87 -20 80 -21Q78 -22 75 -22Q57 -22 55 -4Q55 2 120 150T251 444T318 591Z"/></g><g data-mml-node="mi" transform="translate(8553,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(9191.8,0)"><path data-c="2209" d="M196 25Q84 109 84 250Q84 372 166 450T360 539Q361 539 375 539T413 540T460 540L547 707Q550 716 563 716Q570 716 575 712T581 703T583 696T505 540H568Q583 532 583 520Q583 511 570 501L484 500L366 270H568Q583 262 583 250T568 230H346L247 38Q284 16 328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 447 -40T419 -41Q304 -41 228 3Q117 -211 115 -212Q111 -215 104 -215T92 -212T86 -204T84 -197Q84 -190 89 -183L196 25ZM214 61L301 230H124V228Q124 196 147 147T214 61ZM321 270L440 500Q353 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H321Z"/></g><g data-mml-node="mi" transform="translate(10136.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(10781.6,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"/></g></g></g></svg></mjx-container></span></p></li>
<li><p>交<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.403ex" role="img" focusable="false" viewbox="0 -598 667 620"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2229" d="M88 -21T75 -21T55 -7V200Q55 231 55 280Q56 414 60 428Q61 430 61 431Q77 500 152 549T332 598Q443 598 522 544T610 405Q611 399 611 194V-7Q604 -22 591 -22Q582 -22 572 -9L570 405Q563 433 556 449T529 485Q498 519 445 538T334 558Q251 558 179 518T96 401Q95 396 95 193V-7Q88 -21 75 -21Z"/></g></g></g></svg></mjx-container></span>：参照并</p></li>
<li><p>笛卡尔积<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0.02ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.09ex" role="img" focusable="false" viewbox="0 -491 778 482"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="D7" d="M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z"/></g></g></g></svg></mjx-container></span>：R和S的属性并在一起，然后进行组合</p></li>
<li><p>选择<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.292ex" height="1ex" role="img" focusable="false" viewbox="0 -431 571 442"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"/></g></g></g></svg></mjx-container></span>：在关系R中选择满足给定条件的元组
<span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="32.169ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 14218.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D70E" d="M184 -11Q116 -11 74 34T31 147Q31 247 104 333T274 430Q275 431 414 431H552Q553 430 555 429T559 427T562 425T565 422T567 420T569 416T570 412T571 407T572 401Q572 357 507 357Q500 357 490 357T476 358H416L421 348Q439 310 439 263Q439 153 359 71T184 -11ZM361 278Q361 358 276 358Q152 358 115 184Q114 180 114 178Q106 141 106 117Q106 67 131 47T188 26Q242 26 287 73Q316 103 334 153T356 233T361 278Z"/></g><g data-mml-node="mi" transform="translate(604,-150) scale(0.707)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/></g></g><g data-mml-node="mo" transform="translate(1183.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1572.6,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(2331.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2998.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(4054.2,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"/></g><g data-mml-node="mi" transform="translate(4554.2,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(4915.2,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(5193.2,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(5832,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(6776.7,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(7758,0)"><path data-c="2227" d="M318 591Q325 598 333 598Q344 598 348 591Q349 590 414 445T545 151T611 -4Q609 -22 591 -22Q588 -22 586 -21T581 -20T577 -17T575 -13T572 -9T570 -4L333 528L96 -4Q87 -20 80 -21Q78 -22 75 -22Q57 -22 55 -4Q55 2 120 150T251 444T318 591Z"/></g><g data-mml-node="mi" transform="translate(8647.2,0)"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/></g><g data-mml-node="mo" transform="translate(9396.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(9785.2,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(10146.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(10813,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(11868.7,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(12229.7,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(12680.7,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(13252.7,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(13718.7,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"/></g></g></g></svg></mjx-container></span> F：选择条件，是一个逻辑表达式</p></li>
<li><p>投影<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="1.29ex" height="1ex" role="img" focusable="false" viewbox="0 -431 570 442"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D70B" d="M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z"/></g></g></g></svg></mjx-container></span>：选择某些列 <span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="21.134ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 9341.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D70B" d="M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z"/></g><g data-mml-node="mi" transform="translate(603,-152.7) scale(0.707)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g></g><g data-mml-node="mo" transform="translate(1183.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1572.3,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(2331.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2998.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(4053.9,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"/></g><g data-mml-node="mi" transform="translate(4553.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(4914.9,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"/></g><g data-mml-node="mi" transform="translate(5192.9,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mo" transform="translate(5942.9,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"/></g><g data-mml-node="mo" transform="translate(6220.9,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(6498.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(7137.7,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(8082.4,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(8841.4,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"/></g></g></g></svg></mjx-container></span>
注意：投影不仅取消了原关系中的某些列，还可能去掉某些元组(避免重复行)</p></li>
<li><p>连接<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.011ex;" xmlns="http://www.w3.org/2000/svg" width="2.036ex" height="1.154ex" role="img" focusable="false" viewbox="0 -505 900 510"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="22C8" d="M833 50T833 250T832 450T659 351T487 250T658 150T832 50Q833 50 833 250ZM873 10Q866 -5 854 -5Q851 -5 845 -3L449 226L260 115Q51 -5 43 -5Q39 -5 35 -1T28 7L26 11V489Q33 505 43 505Q51 505 260 385L449 274L845 503Q851 505 853 505Q866 505 873 490V10ZM412 250L67 450Q66 450 66 250T67 50Q69 51 240 150T412 250Z"/></g></g></g></svg></mjx-container></span>：可以理解为先做笛卡尔积，然后去除掉某些行
<span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="48.857ex" height="3.397ex" role="img" focusable="false" viewbox="0 -1251.4 21594.9 1501.4"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="msub" transform="translate(1036.8,0)"><g data-mml-node="mo"><path data-c="22C8" d="M833 50T833 250T832 450T659 351T487 250T658 150T832 50Q833 50 833 250ZM873 10Q866 -5 854 -5Q851 -5 845 -3L449 226L260 115Q51 -5 43 -5Q39 -5 35 -1T28 7L26 11V489Q33 505 43 505Q51 505 260 385L449 274L845 503Q851 505 853 505Q866 505 873 490V10ZM412 250L67 450Q66 450 66 250T67 50Q69 51 240 150T412 250Z"/></g><g data-mml-node="TeXAtom" transform="translate(933,-152.7) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mi" transform="translate(750,0)"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mi" transform="translate(1219,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"/></g></g></g><g data-mml-node="mi" transform="translate(3696.2,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(4619,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(5674.8,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"/></g><g data-mml-node="mover" transform="translate(6174.8,0)"><g data-mml-node="mrow"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g><g data-mml-node="msub" transform="translate(762.9,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g></g></g><g data-mml-node="mstyle" transform="translate(157.6,676.8) scale(1.223)"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="2322" d="M55 141Q55 149 72 174T125 234T209 303T329 360T478 388H526Q649 383 765 319Q814 291 858 250T923 179T944 141Q944 133 938 128T924 122Q914 124 912 125T902 139Q766 328 500 328Q415 328 342 308T225 258T150 199T102 148T84 124Q81 122 75 122Q55 127 55 141Z"/></g></g></g></g><g data-mml-node="mo" transform="translate(7713.3,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="msub" transform="translate(7991.3,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g><g data-mml-node="mo" transform="translate(9032,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(9976.8,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(10958,0)"><path data-c="2227" d="M318 591Q325 598 333 598Q344 598 348 591Q349 590 414 445T545 151T611 -4Q609 -22 591 -22Q588 -22 586 -21T581 -20T577 -17T575 -13T572 -9T570 -4L333 528L96 -4Q87 -20 80 -21Q78 -22 75 -22Q57 -22 55 -4Q55 2 120 150T251 444T318 591Z"/></g><g data-mml-node="msub" transform="translate(11847.2,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g></g><g data-mml-node="mo" transform="translate(12900.6,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(13845.4,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(14712.6,0)"><path data-c="2227" d="M318 591Q325 598 333 598Q344 598 348 591Q349 590 414 445T545 151T611 -4Q609 -22 591 -22Q588 -22 586 -21T581 -20T577 -17T575 -13T572 -9T570 -4L333 528L96 -4Q87 -20 80 -21Q78 -22 75 -22Q57 -22 55 -4Q55 2 120 150T251 444T318 591Z"/></g><g data-mml-node="msub" transform="translate(15601.8,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g><g data-mml-node="mo" transform="translate(16364.7,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"/></g><g data-mml-node="mi" transform="translate(16642.7,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mo" transform="translate(17392.7,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"/></g><g data-mml-node="mo" transform="translate(17948.5,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="msub" transform="translate(19004.3,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g></g><g data-mml-node="mo" transform="translate(19779.9,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"/></g><g data-mml-node="mi" transform="translate(20057.9,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"/></g><g data-mml-node="mo" transform="translate(20816.9,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"/></g><g data-mml-node="mo" transform="translate(21094.9,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"/></g></g></g></svg></mjx-container></span> 其中<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex;" xmlns="http://www.w3.org/2000/svg" width="1.061ex" height="1.618ex" role="img" focusable="false" viewbox="0 -705 469 715"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g></g></g></svg></mjx-container></span>为比较运算符，<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.023ex;" xmlns="http://www.w3.org/2000/svg" width="1.061ex" height="1.618ex" role="img" focusable="false" viewbox="0 -705 469 715"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g></g></g></svg></mjx-container></span>为<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.505ex" role="img" focusable="false" viewbox="0 -583 778 665"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g></g></g></svg></mjx-container></span>时成为等值连接</p>
<p>自然连接：</p>
<ul>
<li>是等值连接的一种特殊情况，就是把重复列去掉了；也就是先笛卡尔积，然后筛选属性相同的行，然后去掉重复列</li>
</ul></li>
<li><p>除<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.081ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.296ex" role="img" focusable="false" viewbox="0 -537 778 573"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="F7" d="M318 466Q318 500 339 518T386 537Q418 537 438 517T458 466Q458 438 440 417T388 396Q355 396 337 417T318 466ZM56 237T56 250T70 270H706Q721 262 721 250T706 230H70Q56 237 56 250ZM318 34Q318 68 339 86T386 105Q418 105 438 85T458 34Q458 6 440 -15T388 -36Q355 -36 337 -15T318 34Z"/></g></g></g></svg></mjx-container></span>：强推<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1tm4y1w7Sz?t=3844.6">除运算</a>进行学习</p>
<ul>
<li><p>象集的概念：</p>
<ul>
<li><p>t[A]代表元组中属性A对应的分量</p></li>
<li><p>给定一个关系R(X,Z)，当t[X]=x时，x在R中的象集为 <span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="26.886ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 11883.8 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"/></g><g data-mml-node="mi" transform="translate(716,-150) scale(0.707)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g></g><g data-mml-node="mo" transform="translate(1448.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(2504,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"/></g><g data-mml-node="mi" transform="translate(3004,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(3365,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"/></g><g data-mml-node="mi" transform="translate(3643,0)"><path data-c="1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"/></g><g data-mml-node="mo" transform="translate(4366,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"/></g><g data-mml-node="mo" transform="translate(4644,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(4922,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(5560.8,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(6505.6,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(7264.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(7709.2,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(8070.2,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"/></g><g data-mml-node="mi" transform="translate(8348.2,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(9200.2,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"/></g><g data-mml-node="mo" transform="translate(9756,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(10811.8,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(11383.8,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"/></g></g></g></svg></mjx-container></span> 表示R上属性组X上值为x的诸元组在Z上分量的集合</p></li>
<li><p>记R(X,Y)和S(Y,Z) <span class="math display"><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="34.094ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 15069.8 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mi" transform="translate(759,0)"><path data-c="F7" d="M318 466Q318 500 339 518T386 537Q418 537 438 517T458 466Q458 438 440 417T388 396Q355 396 337 417T318 466ZM56 237T56 250T70 270H706Q721 262 721 250T706 230H70Q56 237 56 250ZM318 34Q318 68 339 86T386 105Q418 105 438 85T458 34Q458 6 440 -15T388 -36Q355 -36 337 -15T318 34Z"/></g><g data-mml-node="mi" transform="translate(1537,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(2459.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(3515.6,0)"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"/></g><g data-mml-node="msub" transform="translate(4015.6,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g><g data-mml-node="mo" transform="translate(4778.5,0)"><path data-c="5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"/></g><g data-mml-node="mi" transform="translate(5056.5,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(5908.5,0)"><path data-c="5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"/></g><g data-mml-node="mo" transform="translate(6186.5,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="msub" transform="translate(6464.5,0)"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(394,-150) scale(0.707)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g></g><g data-mml-node="mo" transform="translate(7441.5,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(8386.3,0)"><path data-c="1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"/></g><g data-mml-node="mo" transform="translate(9367.5,0)"><path data-c="2227" d="M318 591Q325 598 333 598Q344 598 348 591Q349 590 414 445T545 151T611 -4Q609 -22 591 -22Q588 -22 586 -21T581 -20T577 -17T575 -13T572 -9T570 -4L333 528L96 -4Q87 -20 80 -21Q78 -22 75 -22Q57 -22 55 -4Q55 2 120 150T251 444T318 591Z"/></g><g data-mml-node="msub" transform="translate(10256.7,0)"><g data-mml-node="mi"><path data-c="1D70B" d="M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z"/></g><g data-mml-node="mi" transform="translate(603,-150) scale(0.707)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g><g data-mml-node="mi" transform="translate(11256.2,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(12179,0)"><path data-c="2286" d="M84 346Q84 468 166 546T360 635Q361 635 370 635T395 635T430 636T475 636T524 636H679Q694 628 694 616Q694 607 681 597L522 596H470H441Q366 596 338 592T266 568Q244 557 224 542T179 500T139 433T124 346V341Q124 253 185 185Q244 121 328 103Q348 98 366 98T522 96H681Q694 86 694 76Q694 64 679 56H526Q510 56 480 56T434 55Q350 55 289 71T172 141Q84 223 84 346ZM104 -131T104 -118T118 -98H679Q694 -106 694 -118T679 -138H118Q104 -131 104 -118Z"/></g><g data-mml-node="mi" transform="translate(13234.8,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g><g data-mml-node="mi" transform="translate(13997.8,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(14569.8,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"/></g></g></g></svg></mjx-container></span> 其中<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex;" xmlns="http://www.w3.org/2000/svg" width="2.417ex" height="1.902ex" role="img" focusable="false" viewbox="0 -683 1068.5 840.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g><g data-mml-node="mi" transform="translate(614,-150) scale(0.707)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g></g></g></g></svg></mjx-container></span>为x在R中的象集</p></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p>https://www.bilibili.com/video/BV1tm4y1w7Sz?t=4151.9</p>
<ul>
<li><p>关系模型的完整性约束</p>
<ul>
<li><p>实体完整性</p>
<ul>
<li>主属性不能取空值且唯一</li>
</ul></li>
<li><p>参照完整性</p>
<p>设F是关系R的一个或一组属性，但不是R的候选键，若F在另一个关系S中做主键，则成F为R的外码</p>
<p>其中R称为参照关系，S称为被参照关系。注意R和S可能是同一个关系，而且F在R和S中的名字可能不一样</p>
<p>对于R上每个元组在F中的值必须满足：</p>
<ul>
<li>或者取空值</li>
<li>或者等于S中的某个主键值</li>
</ul></li>
<li><p>用户自定义完整性</p>
<p>这个通常是针对某一列的，比如某一列只能取1或2或3</p></li>
</ul></li>
</ul>
</blockquote>
<h3 id="关系模型原理">2.2 关系模型原理</h3>
<blockquote>
<p>关系模型：</p>
<ul>
<li>数据结构</li>
<li>数据操作</li>
<li>数据关系约束
<ul>
<li>属性列取值类型</li>
<li>属性列取值范围</li>
<li>属性列是否唯一</li>
<li>属性列是否允许空值</li>
<li>关联表的参照完整性约束</li>
</ul></li>
</ul>
<p>关系模型完整性：</p>
<ul>
<li><p>完整性约束的作用：</p>
<ul>
<li>消除关系表的元组重复存储</li>
<li>保持关联表的数据一致性</li>
<li>实现业务数据规则</li>
</ul></li>
<li><p>关系模型完整性约束组成：</p>
<ul>
<li><p>实体完整性</p>
<p>是指在关系表中实施的主键取值约束，保证关系表中的每个元组可被唯一标识</p>
<p>实体完整性约束规则：非空，唯一</p></li>
<li><p>参照完整性</p>
<p>是指在关系表之间需要遵守的数据约束，保证关系之间关联列的数据一致性</p>
<p>参照完整性约束规则：若关系R中的外键F与关系S中的主键K相关联，则R中的外键F必须与S中主键K值一致。</p></li>
<li><p>用户自定义完整性</p>
<p>是指用户根据具体业务规则对数据处理规则要求所定义的数据约束，比如定义列的数据类型与取值范围，定义列的缺省值，定义列是否非空，是否唯一，列之间是否有数据依赖性</p></li>
</ul></li>
</ul>
</blockquote>
<h2 id="三数据库操作sql语言">三、数据库操作SQL语言</h2>
<h3 id="sql语言概述">3.1 SQL语言概述</h3>
<p>SQL语言特点</p>
<blockquote>
<ul>
<li>一体化</li>
<li>使用方式灵活</li>
<li>非过程化</li>
<li>语言语句简单</li>
</ul>
<p>SQL是一种规范，类似普通话，MySQL含有一些特有语言，类似方言</p>
<p>ORM：对象关系映射</p>
</blockquote>
<p>SQL的分类</p>
<blockquote>
<ul>
<li><p>DDL：数据定义语言</p>
<p>create alter drop rename truncate</p></li>
<li><p>DML：数据操作语言</p>
<p>insert delete update select</p></li>
<li><p>DCL：数据控制语言</p>
<p>commit rollback savement</p></li>
</ul>
</blockquote>
<p>关系型数据库</p>
<blockquote>
<ul>
<li>关系型数据库把复杂的数据结构归结为简单的二维表格形式</li>
<li>关系型数据库以行和列的形式存储信息</li>
<li>SQL就是关系型数据库的查询语言</li>
</ul>
</blockquote>
<p>非关系型数据库</p>
<blockquote>
<ul>
<li>即NoSQL，基于键值对存储数据，不需要经过SQL层的解析，性能非常高</li>
<li>分类
<ul>
<li>键值型数据，如Redis</li>
<li>文档型数据，如MongoDB</li>
<li>搜索引擎数据库，Elasticsearch，Solr</li>
<li>列式数据库，HBase</li>
<li>图形数据库</li>
</ul></li>
</ul>
</blockquote>
<p>ER模型</p>
<blockquote>
<ul>
<li>实体集</li>
<li>属性</li>
<li>联系集</li>
</ul>
</blockquote>
<p>表的关联关系</p>
<blockquote>
<ul>
<li><p>一对一</p></li>
<li><p>一对多</p>
<p>在从表创建一个字段，字段作为外键指向主表</p></li>
<li><p>多对多</p>
<p>要表示多对多，必须创建第三个表：联结表</p></li>
<li><p>自我引用</p></li>
</ul>
</blockquote>
<p>MySQL相关</p>
<blockquote>
<p>MySQL在WIndows环境下是大小写不敏感的,在Linux下是大小写敏感的</p>
<p>注释:</p>
<ul>
<li>单行注释:<code>#</code>或者<code>--</code></li>
<li>多行注释:<code>/**/</code></li>
</ul>
<p>在规范方面,字符串和日期时间类型的变量需要使用单引号,列的别名需要使用双引号</p>
<p>所有的运算符或者列值遇到null,运算结果都为null</p>
<p>着重号:反引号</p>
<p>若要保证表中的字段和表名没有和保留字冲突,就需要使用反引号</p>
<p>MySQL从5.7版本直接跳跃发布了8.0版本，在MySQL6.x后分了社区版和商业版333</p>
</blockquote>
<p>算数运算符</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">+ select 1+'1'返回为2,sql会把字符串转换为数字<br>-<br>*<br>/或者div<br>%或者mod<br></code></pre></td></tr></table></figure>
</blockquote>
<p>比较运算符</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mysql">= 等于<br>&lt;=&gt; 安全等于,安全地判断两个值\字符串或表达式是否相等,和等于的唯一区别是可以对null进行判断,null&lt;=&gt;null返回1<br>&lt;&gt;或者!= 不等于<br>&lt;<br>&lt;=<br>&gt;<br>&gt;=<br>is null或者isnull<br>is not null<br>least(a,b) 在多个值中返回最小值<br>greatest(a,b)<br>in #elect name from employees where salary not in (6000,7000,8000)<br>not in<br>like # 模糊查询select * from employees where last_name like '%a%',%代表0个或多个字符<br>	# _代表一个不确定的字符<br>regexp或者rlike<br>between and<br></code></pre></td></tr></table></figure>
</blockquote>
<p>逻辑运算符与位运算符</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mysql">not或者!<br>and或者&amp;&amp; 优先级高于or<br>or或者||<br>xor<br>&amp;<br>|<br>^<br>~<br>&gt;&gt;<br>&lt;&lt;<br></code></pre></td></tr></table></figure>
</blockquote>
<p>postgresql和mysql在引号上的区别</p>
<blockquote>
<ul>
<li>postgresql上的单引号是用来标识值的，双引号标识列名表名等数据库中存在的值，不能用反单引号</li>
<li>mysql支持用反单引号标识系统标识符(类似postgresql的双引号)，可以用双引号或者单引号表示值</li>
</ul>
</blockquote>
<h3 id="数据定义sql语句ddl">3.2 数据定义SQL语句DDL</h3>
<blockquote>
<p>数据库相关：</p>
<ul>
<li><p>创建与删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> database xxx;<br><span class="hljs-keyword">drop</span> database yyy;<br></code></pre></td></tr></table></figure></li>
<li><p>改名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> database xxx rename <span class="hljs-keyword">to</span> yyy;<br></code></pre></td></tr></table></figure></li>
</ul>
<p>表相关</p>
<ul>
<li><p>创建与删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> xxx (列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束]);<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> yyy;<br></code></pre></td></tr></table></figure></li>
<li><p>改名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> xxx rename <span class="hljs-keyword">to</span> yyy;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> xxx rename 原列名 <span class="hljs-keyword">to</span> 新列名;<br></code></pre></td></tr></table></figure></li>
<li><p>列的增加与删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">add</span> 新列名 数据类型 约束;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">drop</span> <span class="hljs-keyword">column</span> 列名;<br></code></pre></td></tr></table></figure></li>
<li><p>列的数据类型修改</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> xxx <span class="hljs-keyword">alter</span> <span class="hljs-keyword">column</span> yyy type 新的数据类型;<br></code></pre></td></tr></table></figure></li>
<li><p>约束相关</p>
<p>约束：<code>primary key,null,not null,default,unique,check</code></p>
<p>删除约束：<code>alter table drop constraint 约束名;</code></p>
<ul>
<li><p>主键相关</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> xxx (列名 数据类型 [类完整性约束] <span class="hljs-keyword">primary</span> key,<br>               列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束]);<br>使用列约束关键词`<span class="hljs-keyword">primary</span> key`只能定义单列主键。若要定义复合主键，只能使用表约束，比如,<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> xxx (列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束]<br><span class="hljs-keyword">constraint</span> 约束名 <span class="hljs-keyword">primary</span> key(主键列));<br></code></pre></td></tr></table></figure></li>
<li><p>外键相关</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> xxx (列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束]<br><span class="hljs-keyword">constraint</span> 约束名 <span class="hljs-keyword">foreign</span> key(外键列) <span class="hljs-keyword">references</span> xxx (yyy));<br>或者<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> xxx (列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束] <span class="hljs-keyword">references</span> xxx (yyy));<br></code></pre></td></tr></table></figure></li>
<li><p>代理键相关</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> xxx (<br> 			  代理键列名 <span class="hljs-operator">&lt;</span>Serial 数据类型<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br> 			  列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束],<br>               列名 数据类型 [类完整性约束]<br><span class="hljs-keyword">constraint</span> 约束名 <span class="hljs-keyword">primary</span> key(代理键列名);<br></code></pre></td></tr></table></figure></li>
</ul></li>
<li><p>索引相关</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> index 索引名 <span class="hljs-keyword">on</span> 表名 (列名)<br><span class="hljs-keyword">drop</span> index 索引名;<br><span class="hljs-keyword">alter</span> index 索引名 rename <span class="hljs-keyword">to</span> 新索引名;<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h3 id="数据操纵sql语句dml">3.3 数据操纵SQL语句DML</h3>
<blockquote>
<ul>
<li><p>数据插入</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> 视图名<span class="hljs-operator">/</span>表名 [列名] <span class="hljs-keyword">values</span> (列值表)<br></code></pre></td></tr></table></figure></li>
<li><p>数据更新</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">update</span> 视图名<span class="hljs-operator">/</span>表名 <span class="hljs-keyword">set</span> 列名<span class="hljs-operator">=</span>值 [<span class="hljs-keyword">where</span> ...]<br></code></pre></td></tr></table></figure></li>
<li><p>数据删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">delete</span> <span class="hljs-keyword">from</span> 视图名<span class="hljs-operator">/</span>表名 [<span class="hljs-keyword">where</span>]<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h3 id="数据查询sql语句dql">3.4 数据查询SQL语句DQL</h3>
<h4 id="单表数据查询">3.4.1 单表数据查询</h4>
<blockquote>
<ul>
<li><p>排序问题：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> employees <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> salary <span class="hljs-keyword">DESC</span> # 降序<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> employees <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> salary AES # 升序<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> yyy <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> xxx <span class="hljs-keyword">DESC</span>,zzz <span class="hljs-keyword">ASC</span>; # 二级排序<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> employees <span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> a,b # 二级排序<br></code></pre></td></tr></table></figure></li>
<li><p>去重问题：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> xxx <span class="hljs-keyword">from</span> yyy;<br></code></pre></td></tr></table></figure></li>
<li><p>正则查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">%</span> 代表一个或多个字符<br>_ 代表一个字符<br></code></pre></td></tr></table></figure></li>
<li><p>聚合函数：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-built_in">avg</span>();<br><span class="hljs-built_in">count</span>(); # 计算行数可以用<span class="hljs-built_in">count</span>(<span class="hljs-number">1</span>)或者<span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>)，但是括号内不能是字段，因为可能是<span class="hljs-keyword">null</span><br><span class="hljs-built_in">min</span>();<br><span class="hljs-built_in">max</span>();<br><span class="hljs-built_in">sum</span>();<br></code></pre></td></tr></table></figure>
<p>若未对查询结果分组，聚集函数将作用于整个查询结果</p>
<p>对查询结果分组后，聚集函数将分别作用于每个组</p></li>
<li><p>分组统计 Group by：</p>
<ul>
<li>select中出现的非组函数的字段必须出现在group by中</li>
<li>group by声明在from之后，where之后，order by前面，limit前面</li>
</ul></li>
<li><p>Having的使用：</p>
<ul>
<li><p>如果过滤条件中使用了聚合函数，则必须使用HAVING替换where，否则报错</p></li>
<li><p>HAVING的使用必须有group by，且必须出现在group by的后面</p></li>
<li><p>having的效率低于where</p></li>
<li><p>在select中给列起别名后，不能在where中使用，可以在order
by中使用</p></li>
</ul></li>
<li><p>分页：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> employees limit <span class="hljs-number">0</span>,<span class="hljs-number">20</span><br>从第<span class="hljs-number">0</span>条数据开始,每页显示<span class="hljs-number">20</span>个<br>或者<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> employees limit <span class="hljs-number">3</span> <span class="hljs-keyword">offset</span> <span class="hljs-number">4</span><br>注意:limit语句必须放在整个<span class="hljs-keyword">select</span>语句的最后<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h4 id="多表数据查询-连接">3.4.2 多表数据查询-连接</h4>
<blockquote>
<ul>
<li><p>多表查询的分类：</p>
<ul>
<li>等值连接与非等值连接</li>
<li>自连接与非自连接：可以用别名区分两个相同的表</li>
<li>内连接与外连接</li>
</ul></li>
<li><p>内连接：使用JOIN...ON连接查询语句</p>
<ul>
<li><p>定义：合并具有同一列的两个以上的表的行，结果集中不包含一个表与另一个表不匹配的行</p></li>
<li><p>从SQL优化的角度，建议每个字段前指明字段所在的表</p></li>
<li><p>一旦给表起了别名，则在select和where中必须使用别名，不能使用原名</p></li>
<li><p>对于SQL92语法：表的连接条件在<code>where</code>中填写</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> a.xxx, b.yyy <span class="hljs-keyword">from</span> zzz <span class="hljs-keyword">where</span> ...<br></code></pre></td></tr></table></figure></li>
<li><p>对于SQL99语法：表的连接条件在<code>ON</code>中填写</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> c1 <span class="hljs-keyword">from</span> t1 <span class="hljs-keyword">join</span> t2 <span class="hljs-keyword">on</span> xxx;<br></code></pre></td></tr></table></figure></li>
<li><p>特殊情况：当表的连接条件没有或者失效的时候，变为交叉连接/笛卡尔积</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> last_name, department_name <span class="hljs-keyword">from</span> employees <span class="hljs-keyword">cross</span> <span class="hljs-keyword">join</span> deparments;<br></code></pre></td></tr></table></figure></li>
</ul></li>
<li><p>外连接</p>
<ul>
<li><p>左外连接</p>
<p>结果中除了包含满足条件的，还包含左表中不满足条件的行</p>
<p>Mysql只支持SQL99语法的左/右外连接，不支持SQL92语法的左/右外连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> a,b <span class="hljs-keyword">from</span> xxx <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> yyy<br></code></pre></td></tr></table></figure></li>
<li><p>右外连接</p>
<p>结果中除了包含满足条件的，还包含右表中不满足条件的行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> a,b <span class="hljs-keyword">from</span> xxx <span class="hljs-keyword">right</span> <span class="hljs-keyword">join</span> yyy<br></code></pre></td></tr></table></figure></li>
<li><p>满外连接</p>
<p>结果中除了包含满足条件的，还包含左右表中不满足条件的行</p>
<p>Mysql不支持满外连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> a,b <span class="hljs-keyword">from</span> xxx <span class="hljs-keyword">full</span> <span class="hljs-keyword">join</span> yyy;<br></code></pre></td></tr></table></figure>
<p>既然SQL不支持满外连接，那么如何满足诉求呢？</p>
<ul>
<li><p>UNION</p>
<p>利用UNION，可以给出多条SELECT语句，并将他们的结果组成单个结果集。合并时，两个表对应的列数和数据类型必须相同，并且相互对应，各个SELECT语句之间使用UNION(取并集后去重，所以效率低)或UNION
ALL(取并集后不去重)关键字分割</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> employee_id,department_id<br><span class="hljs-keyword">from</span> employees e <span class="hljs-keyword">left</span> <span class="hljs-keyword">join</span> departments d<br><span class="hljs-keyword">on</span> e.department_id<span class="hljs-operator">=</span>department_id<br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span><br><span class="hljs-keyword">select</span> employee_id,department_id<br><span class="hljs-keyword">from</span> employees e <span class="hljs-keyword">right</span> <span class="hljs-keyword">join</span> departments d<br><span class="hljs-keyword">on</span> e.department_id<span class="hljs-operator">=</span>department_id<br><span class="hljs-keyword">where</span> e.department_id <span class="hljs-keyword">is</span> <span class="hljs-keyword">null</span>;<br></code></pre></td></tr></table></figure></li>
<li><figure>
<img src="/2023/02/28/Courses/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8/image-20230510213917225.png" srcset="/img/loading.gif" lazyload alt="image-20230510213917225">
<figcaption aria-hidden="true">image-20230510213917225</figcaption>
</figure></li>
</ul></li>
</ul></li>
<li><p>SQL99语法新特性：</p>
<ul>
<li><p>自然连接</p>
<p>可以把自然连接理解为等值连接，会自动帮你查阅两张连接表中所有相同的字段，然后进行等值连接，这种方式并不推荐，可维护性差</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> xxx,yyy<br><span class="hljs-keyword">from</span> qqq<br><span class="hljs-keyword">natural</span> <span class="hljs-keyword">join</span> yyy;<br></code></pre></td></tr></table></figure></li>
<li><p>USING连接</p>
<p>对<code>join on</code>中的等值连接进行了优化</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> name,sex,addr<br><span class="hljs-keyword">from</span> personInfo<br><span class="hljs-keyword">join</span> houseInfo<br><span class="hljs-keyword">on</span> personInfo.name<span class="hljs-operator">=</span>houseInfo.name<br>可以写为<br><span class="hljs-keyword">select</span> name,sex,addr<br><span class="hljs-keyword">from</span> personInfo<br><span class="hljs-keyword">join</span> houseInfo<br><span class="hljs-keyword">using</span>(name)<br></code></pre></td></tr></table></figure></li>
</ul></li>
</ul>
<p>SQL99语法综合：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&gt;</span><span class="hljs-keyword">select</span> xxx,xxx,xxx(存在聚合函数)<br><span class="hljs-keyword">from</span> xxx<br><span class="hljs-operator">&gt;</span><span class="hljs-keyword">join</span> q <span class="hljs-keyword">on</span> y<br><span class="hljs-keyword">join</span> z <span class="hljs-keyword">on</span> q<br><span class="hljs-keyword">where</span> xxx<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> xxx<br><span class="hljs-operator">&gt;</span><span class="hljs-keyword">having</span> xxx<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> xxx<br><span class="hljs-operator">&gt;</span>limit xxx<br></code></pre></td></tr></table></figure>
<p>执行过程</p>
<ul>
<li><code>from-&gt;on-&gt;join-&gt;where-&gt;group-&gt;having-&gt;select-&gt;distinct-&gt;order-&gt;limit</code></li>
<li>参考资料：https://www.bilibili.com/video/BV1iq4y1u7vj?t=1934.7&amp;p=41</li>
</ul>
</blockquote>
<h4 id="多表数据查询-子查询嵌套查询">3.4.3
多表数据查询-子查询(嵌套查询)</h4>
<blockquote>
<ul>
<li><p>子查询(结果在一个表中)</p>
<p>一般来说，子查询只适合结果数据均来自一个表，若大于等于2个表，则不能使用子查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> xxx <span class="hljs-keyword">from</span> yyy <span class="hljs-keyword">where</span> (含<span class="hljs-keyword">select</span>的另一结果集);<br></code></pre></td></tr></table></figure></li>
<li><p>相关注意点：</p>
<ul>
<li>子查询要放在括号内</li>
</ul></li>
<li><p>子查询分类：</p>
<p>从内查询返回的结果的条数：</p>
<ul>
<li>单行子查询</li>
<li>多行子查询</li>
</ul>
<p>从内查询是否被执行多次：</p>
<ul>
<li>相关子查询</li>
<li>不相关子查询</li>
</ul></li>
<li><p>单行子查询：</p>
<ul>
<li>单行比较操作符：<code>= &gt; &gt;= &lt; &lt;= &lt;&gt;(不等于)</code></li>
</ul></li>
<li><p>多行子查询(集合比较子查询)：</p>
<ul>
<li><p>多行比较运算符：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">in</span><br><span class="hljs-keyword">any</span> 需要和单行比较操作符一起使用，和子查询返回的某一个值进行比较<br><span class="hljs-keyword">all</span> 需要和单行比较操作符一起使用，和子查询返回的所有值进行比较<br><span class="hljs-keyword">some</span> 实际是<span class="hljs-keyword">any</span>的别名，作用相同，一般使用<span class="hljs-keyword">any</span><br></code></pre></td></tr></table></figure></li>
</ul></li>
</ul>
</blockquote>
<h3 id="数据控制sql语句dcl">3.5 数据控制SQL语句DCL</h3>
<blockquote>
<p>数据控制语句是对用户数据访问权进行控制的操作语句</p>
<p>创建用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> <span class="hljs-string">'q'</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">'y'</span>; <br></code></pre></td></tr></table></figure>
<p>删除用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">user</span> <span class="hljs-string">'q'</span>;<br></code></pre></td></tr></table></figure>
<p>设置当前用户密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> password <span class="hljs-operator">=</span> <span class="hljs-string">'123'</span>;<br>或者<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">user</span>() identified <span class="hljs-keyword">by</span> <span class="hljs-string">'123'</span>;<br></code></pre></td></tr></table></figure>
<p>设置其他用户密码</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> <span class="hljs-string">'q'</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">'456'</span>;<br></code></pre></td></tr></table></figure>
<p>查看所有用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">from</span> mysql.user;<br></code></pre></td></tr></table></figure>
<p>查看Mysql所有支持的权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> privileges;<br></code></pre></td></tr></table></figure>
<p>查看权限列表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> grants;<br><span class="hljs-keyword">show</span> grants <span class="hljs-keyword">for</span> <span class="hljs-string">'q'</span>@<span class="hljs-string">'localhost'</span>;root用户可以查看其他用户的权限<br></code></pre></td></tr></table></figure>
<p>grant授权</p>
<p>把一个用户的某个数据库下的某个或者所有表授权给另一个用户</p>
<p>with grant
option表明在授权时授予被授权用户将自己获得的权限授予其他用户的能力</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> <span class="hljs-keyword">select</span>, <span class="hljs-keyword">update</span> <span class="hljs-keyword">on</span> mydb.<span class="hljs-operator">*</span> <span class="hljs-keyword">to</span> <span class="hljs-string">'q'</span>@<span class="hljs-string">'%'</span> [<span class="hljs-keyword">with</span> <span class="hljs-keyword">grant</span> option];<br><span class="hljs-keyword">grant</span> <span class="hljs-keyword">all</span> privileges <span class="hljs-keyword">on</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">to</span> <span class="hljs-string">'q'</span>@<span class="hljs-string">'%'</span>; #所有表的所有权限都授权，此时和root用户的唯一区别就是不能给其他用户赋权<br></code></pre></td></tr></table></figure>
<p>revoke收权：就是取消已经赋予用户的某些权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">update</span> <span class="hljs-keyword">on</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'q'</span>@<span class="hljs-string">'%'</span>;<br><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">all</span> privileges <span class="hljs-keyword">on</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'q'</span>@<span class="hljs-string">'%'</span><br></code></pre></td></tr></table></figure>
<p>deny权限拒绝</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">deny 权限列表 <span class="hljs-keyword">on</span> 数据库对象 <span class="hljs-keyword">to</span> 用户<span class="hljs-operator">/</span>角色<br></code></pre></td></tr></table></figure>
</blockquote>
<h3 id="视图sql语句">3.6 视图SQL语句</h3>
<blockquote>
<p>为什么使用视图？</p>
<ul>
<li>可以帮助我们使用表的一部分而不是所有的表，隐藏一些敏感数据</li>
<li>针对不同的用户制定不同的查询视图</li>
<li>简化复杂的SQL查询操作</li>
<li>外部人员无法知道数据库结构，提高数据访问安全性</li>
</ul>
<p>创建视图</p>
<p>查询语句中字段的别名会作为视图字段名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> 视图名 <span class="hljs-keyword">as</span> 查询语句;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 视图名;<br></code></pre></td></tr></table></figure>
<p>也可以自己指定字段名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> 视图名 (xxx, yyy, zzz)<span class="hljs-keyword">as</span> 查询语句;<br></code></pre></td></tr></table></figure>
<p>查看视图</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> tables;查看表和视图<br><span class="hljs-keyword">desc</span> 视图名; 查看视图结构<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">table</span> status <span class="hljs-keyword">like</span> <span class="hljs-string">'视图名'</span>\G; 查看视图的属性信息<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">view</span> 视图名; 查看视图的详细定义信息<br></code></pre></td></tr></table></figure>
<p>修改</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> replace <span class="hljs-keyword">view</span> xxx <span class="hljs-keyword">as</span> ...; # 这里的<span class="hljs-keyword">or</span> replace类似if <span class="hljs-keyword">not</span> <span class="hljs-keyword">exists</span>，若存在则修改<br>或者<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">view</span> xxx <span class="hljs-keyword">as</span> ...;<br></code></pre></td></tr></table></figure>
<p>删除视图</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">view</span> xxx;<br></code></pre></td></tr></table></figure>
</blockquote>
<h3 id="postgresql数据库sql实践">3.7 Postgresql数据库SQL实践</h3>
<h2 id="四数据库设计与实现">四、数据库设计与实现</h2>
<h3 id="数据库设计概述">4.1 数据库设计概述</h3>
<blockquote>
<p>数据库应用架构可分为四种：</p>
<ul>
<li>单用户结构</li>
<li>集中式结构</li>
<li>客户端/服务器结构</li>
<li>分布式结构</li>
</ul>
<p>数据库结构模型设计分为三种：</p>
<ul>
<li>概念模型</li>
<li>逻辑模型</li>
<li>物理模型</li>
</ul>
<p>数据库应用访问方式设计：</p>
<ul>
<li>基于本地接口</li>
<li>基于标准接口</li>
<li>基于数据访问层框架</li>
</ul>
</blockquote>
<h3 id="e-r模型">4.2 E-R模型</h3>
<blockquote>
<p>E-R模型：</p>
<ul>
<li>实体-联系模型</li>
</ul>
<p>实体之间的关系：</p>
<ul>
<li>两个实体型之间的联系：
<ul>
<li>一对一</li>
<li>一对多</li>
<li>多对多</li>
</ul></li>
</ul>
<p>标识符：</p>
<ul>
<li>表示不同实体实例的属性，标识符可以是一个或多个属性</li>
</ul>
<p>标识符和主键的区别是标识符是一个逻辑概念，主键是一个物理概念</p>
<p>鸟足版本的实体-联系符号含义</p>
<figure>
<img src="/2023/02/28/Courses/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8/image-20230406104149407.png" srcset="/img/loading.gif" lazyload alt="image-20230406104149407">
<figcaption aria-hidden="true">image-20230406104149407</figcaption>
</figure>
<p>联系度数：</p>
<ul>
<li>联系中关联的实体数目</li>
</ul>
<p>在继承性联系中，可分为两种：</p>
<ul>
<li>互斥性继承联系：父实体中的一个实例只能属于某个子实体，不能同时属于多个子实体</li>
<li>非互斥性继承联系：</li>
</ul>
<p>继承性联系还有另一种分类：</p>
<ul>
<li>完整继承联系：父实体中的实例完整地被各个子实体分别继承</li>
<li>非完整继承联系</li>
</ul>
<p>继承联系的图形符号(最后一行的符号是错误的，考完了，懒得改了QAQ)：</p>
<figure>
<img src="/2023/02/28/Courses/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8/image-20230406104714468.png" srcset="/img/loading.gif" lazyload alt="image-20230406104714468">
<figcaption aria-hidden="true">image-20230406104714468</figcaption>
</figure>
<p>按照语义联系可分为两种：</p>
<ul>
<li>强实体</li>
<li>弱实体
<ul>
<li>标识符依赖</li>
<li>非标识符依赖</li>
</ul></li>
</ul>
<p>如果弱实体的标识符中含有所依赖实体的标识符，则称为标识符依赖弱实体</p>
<p>如果弱实体的标识符中不含有所依赖实体的标识符，则称为非标识符依赖弱实体</p>
</blockquote>
<h3 id="数据库建模设计">4.3 数据库建模设计</h3>
<blockquote>
<p>概念数据模型设计步骤：</p>
<ul>
<li>业务数据分析，抽取数据实体</li>
<li>定义实体属性及标识</li>
<li>建立实体联系，构建局部ER图</li>
<li>分类、聚集、概括各个部分ER模型图</li>
<li>完善全局ER图，建立系统业务数据组成结构</li>
</ul>
<p>数据模型元素对应关系：</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">CDM</th>
<th style="text-align: center;">LDM</th>
<th style="text-align: center;">PDM</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">实体</td>
<td style="text-align: center;">实体</td>
<td style="text-align: center;">表</td>
</tr>
<tr class="even">
<td style="text-align: center;">属性</td>
<td style="text-align: center;">属性</td>
<td style="text-align: center;">列</td>
</tr>
<tr class="odd">
<td style="text-align: center;">标识符</td>
<td style="text-align: center;">标识符</td>
<td style="text-align: center;">主键、外键</td>
</tr>
<tr class="even">
<td style="text-align: center;">联系</td>
<td style="text-align: center;">联系</td>
<td style="text-align: center;">参照完整性约束</td>
</tr>
</tbody>
</table>
</blockquote>
<h3 id="数据库规范化设计">4.4 数据库规范化设计</h3>
<blockquote>
<p>为什么需要规范化数据库设计？</p>
<ul>
<li>减少数据库中的冗余数据，尽量使同一数据在数据库中仅保存一份，有效降低维护数据一致性的工作量。</li>
<li>设计合理的表间依赖关系和约束关系，便于实现数据完整性和一致性。</li>
<li>设计合理的数据库结构，便于系统对数据的高效访问处理。</li>
</ul>
<p>数据库的表可能存在哪些问题？</p>
<ul>
<li>数据冗余</li>
<li>增删改异常</li>
</ul>
<p>函数依赖理论：</p>
<ul>
<li>设有一个关系模式R(U)，U为关系R的属性集合，X和Y分别为U的子集。设t，s为关系R中的任意两个元素，若t[x]=s[x]，则t[Y]=s[Y]，那么称Y函数依赖于X，表示为X-&gt;Y</li>
<li>函数依赖的左部称为决定因子，右部称为一看函数，他们都是属性的集合</li>
<li>函数依赖反映属性或属性组之间相互依存，相互制约的关系</li>
</ul>
<p>补充：</p>
<ul>
<li>什么是关系？就当做数据表就行</li>
<li>关系模式：对关系的描述</li>
<li>什么是关系模型？就是若干关系的集合，也就是一个是数据库</li>
<li>实体：客观存在的对象</li>
<li>联系：实体之间的关系</li>
</ul>
<p>函数依赖的类型：</p>
<ul>
<li><p>完全函数依赖</p>
<p>设X，Y为关系R的不同属性集，若<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.173ex" height="1.57ex" role="img" focusable="false" viewbox="0 -683 3170.6 694"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(1129.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(2407.6,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g></g></g></svg></mjx-container></span>，且不存在<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="7.616ex" height="1.808ex" role="img" focusable="false" viewbox="0 -759 3366.2 799"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(936.2,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"/></g></g><g data-mml-node="mo" transform="translate(1458.4,0)"><path data-c="2282" d="M84 250Q84 372 166 450T360 539Q361 539 370 539T395 539T430 540T475 540T524 540H679Q694 532 694 520Q694 511 681 501L522 500H470H441Q366 500 338 496T266 472Q244 461 224 446T179 404T139 337T124 250V245Q124 157 185 89Q244 25 328 7Q348 2 366 2T522 0H681Q694 -10 694 -20Q694 -32 679 -40H526Q510 -40 480 -40T434 -41Q350 -41 289 -25T172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(2514.2,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g></g></g></svg></mjx-container></span>，使得<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.917ex" height="1.742ex" role="img" focusable="false" viewbox="0 -759 3499.2 770"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(936.2,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"/></g></g><g data-mml-node="mo" transform="translate(1458.4,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(2736.2,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g></g></g></svg></mjx-container></span>，则称Y为完全函数依赖，否则称Y部分函数依赖</p></li>
<li><p>部分函数依赖</p></li>
<li><p>传递函数依赖</p>
<p>设X，Y，Z为某关系的不同属性集，有<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.439ex;" xmlns="http://www.w3.org/2000/svg" width="23.869ex" height="2.059ex" role="img" focusable="false" viewbox="0 -716 10550 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(1129.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(2407.6,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g><g data-mml-node="mo" transform="translate(3170.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(3615.2,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g><g data-mml-node="mo" transform="translate(4378.2,0)"><path data-c="21" d="M78 661Q78 682 96 699T138 716T180 700T199 661Q199 654 179 432T158 206Q156 198 139 198Q121 198 119 206Q118 209 98 431T78 661ZM79 61Q79 89 97 105T141 121Q164 119 181 104T198 61Q198 31 181 16T139 1Q114 1 97 16T79 61Z"/></g><g data-mml-node="mo" transform="translate(4934,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(6211.8,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(7063.8,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(7508.4,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g><g data-mml-node="mo" transform="translate(8549.2,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(9827,0)"><path data-c="1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"/></g></g></g></svg></mjx-container></span>，若<span class="math inline"><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.083ex" height="1.57ex" role="img" focusable="false" viewbox="0 -683 3130.6 694"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(1129.8,0)"><path data-c="2192" d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(2407.6,0)"><path data-c="1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"/></g></g></g></svg></mjx-container></span>，则称Z对X存在函数依赖传递</p></li>
<li><p>多值函数依赖</p>
<p>设U是关系模式R的属性集，X和Y是U的子集，Z=U-X-Y，对于R的关系r，在r中存元组(x，y1，z1)和(x，y2，z2)时，也存在元组(x，y1，z2)和(x，y2，z1)，则称在模式R上存在多值函数依赖</p></li>
</ul>
<p>如何看函数依赖关系？</p>
<ul>
<li>首先找到主属性</li>
<li>然后看主属性到非主属性的关系</li>
<li>然后看主属性内部和非主属性内部的关系</li>
</ul>
<p>关系规范化范式：</p>
<ul>
<li><p>第一范式1NF：</p>
<p>关系表中的属性不可再细分，就是说列里面存放的东西只能有一个</p></li>
<li><p>第二范式2NF：</p>
<p>若关系满足第一范式，并且消除了关系中的部分函数依赖，也就是每个非主属性都完全依赖于任何一个候选码，则称满足第二范式</p></li>
<li><p>第三范式3NF：</p>
<p>若关系满足第二范式，并且切断了关系中的属性传递函数依赖，则称满足第三范式</p></li>
<li><p>巴斯-科德范式BCNF：</p>
<p>关系中的所有函数依赖的决定因子都是候选键，则称满足BCNF</p>
<p>BCNF有两种思路可以理解：</p>
<ul>
<li>消除了主属性内部的部分和传递函数依赖</li>
<li>把所有的决定关系都列出来，箭头的左侧必须是候选码，则满足BCNF</li>
</ul></li>
<li><p>第四范式4NF：</p>
<p>若关系满足BCNF，并且消除了多值函数依赖，则称满足第四范式</p></li>
</ul>
<p>如何从提升范式？</p>
<ul>
<li>强推！！！https://www.bilibili.com/video/BV1wv4y1m7J2?t=3236.7&amp;p=15</li>
<li>用白话文就是：“谁跟你好，复制自己，把它带走”</li>
</ul>
<p>关系规范化程度的利弊：</p>
<ul>
<li>关系的规范化程度越高，冗余数据越少，可消除的异常访问越多；但是同时分解出来的关系表也就越多，实现数据查询时，需要关联多表，效率比较低</li>
<li>https://www.bilibili.com/video/BV1784y1k7NR?t=1227.1</li>
</ul>
<p>一些名词的解释参考资料：</p>
<p>https://www.cnblogs.com/fudashi/p/6856628.html</p>
<p>https://www.bilibili.com/video/BV1wv4y1m7J2?t=77.4!!!!!!</p>
</blockquote>
<h2 id="五数据库管理">五、数据库管理</h2>
<h3 id="事务管理">5.1 事务管理</h3>
<blockquote>
<p>什么是事务：</p>
<ul>
<li>是一组逻辑单元，使数据从一种状态变成另一种状态</li>
</ul>
<p>事务的ACID属性：</p>
<ul>
<li>原子性：事务所有操作在数据库中要么全部执行，要么全部不执行</li>
<li>一致性：事务多次执行，其结果应一致</li>
<li>隔离性：事务与事务之间隔离，并发执行透明</li>
<li>持续性：事务完成之后，数据的改变必须是永久的</li>
</ul>
<p>事务的状态：</p>
<ul>
<li>活动的：事务对应的数据库操作正在执行过程中</li>
<li>部分提交的：事务执行完成，但是只是在内存中，还没有刷新到磁盘上</li>
<li>失败的：失败后暂未回滚</li>
<li>中止的：失败后回滚完毕</li>
<li>提交的：已经将修改过的数据同步到磁盘上</li>
</ul>
<p>开启事务：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">start</span> transaction read <span class="hljs-keyword">only</span> <span class="hljs-operator">/</span> read write(默认) <span class="hljs-operator">/</span> <span class="hljs-keyword">with</span> consistent snapshot;<br>或者<br><span class="hljs-keyword">begin</span>;<br></code></pre></td></tr></table></figure>
<p>关于SAVEPOINT：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">savepoint</span> xxx; 创建保存点<br><span class="hljs-keyword">release</span> <span class="hljs-keyword">savepoint</span> xxx; 删除保存点<br><span class="hljs-keyword">rollback</span> <span class="hljs-keyword">to</span> xxx; 回滚到保存点<br></code></pre></td></tr></table></figure>
</blockquote>
<h3 id="并发管理">5.2 并发管理</h3>
<blockquote>
<p>数据并发问题：</p>
<ul>
<li>脏写(更新数据丢失)：B正在执行一个事务，暂未提交，此时A也执行了一个事务，对B暂未提交的数据进行了修改，但是B突然又回滚</li>
<li>脏读：B正在执行一个事务，暂未提交，此时A也执行了一个事务，对B暂未提交的数据进行了读取，但是B突然又回滚；也就是一个事务读取了被取消持久化的共享数据</li>
<li>不可重复读：A读取了一个字段，B更新了这个字段，A再次读取发现值变了</li>
<li>幻读：A读取了一个字段，B插入了几行数据，A再次读取发现多了几行</li>
</ul>
<p>什么是可串行化调度：</p>
<ul>
<li>就是事务中数据操作调度顺序的结果和事务串行执行结果一致，符合这样效果的调度称为可串行化调度</li>
</ul>
<p>锁：</p>
<ul>
<li><p>简介：可以理解为解决多个事务并发带来的数据不一致问题的一种机制</p></li>
<li><p>并发事务访问相同记录的情况大大致可以划分为三种：</p>
<ul>
<li>读-读情况</li>
<li>写-写情况：会出现脏写</li>
<li>读-写情况：会出现脏读，不可重复读，幻读</li>
</ul></li>
<li><p>并发问题的解决方案：</p>
<ul>
<li>方案一：读操作利用多版本并发控制MVCC，写操作进行加锁</li>
<li>方案二：读、写操作都采用加锁的方式，意味着就要像写-写操作那样排队等待</li>
</ul></li>
<li><p>锁的分类：</p>
<ul>
<li>从数据操作的类型划分
<ul>
<li>读锁/共享锁/S锁：多个事务的读操作相互不会堵塞</li>
<li>写锁/排他锁/X锁：若当前写操作未完成，会阻断其它写锁和读锁</li>
</ul></li>
<li>从资源锁定的粒度划分
<ul>
<li>数据库</li>
<li>表</li>
<li>页面</li>
<li>行</li>
</ul></li>
<li>从资源锁定实施方式
<ul>
<li>隐式锁定</li>
<li>显式锁定</li>
</ul></li>
</ul></li>
<li><p>加锁协议：</p>
<ul>
<li><p>一级加锁协议</p>
<p>任何事务在<code>修改</code>共享数据对象之前，必须对共享数据单元执行排他锁指令</p>
<p>解决了更新数据丢失问题</p></li>
<li><p>二级加锁协议</p>
<p>在一级加锁协议上，对共享数据进行<code>读</code>操作前，必须对共享数据单元执行共享锁指令，<code>读完数据</code>即可释放共享锁定</p>
<p>解决了更新数据丢失，脏读问题</p></li>
<li><p>三级加锁协议</p>
<p>在一级加锁协议上，对共享数据进行<code>读</code>操作前，必须对共享数据单元执行共享锁指令，<code>事务处理结束</code>即可释放共享锁定</p>
<p>解决了更新数据丢失，脏读，不可重复读问题</p></li>
</ul></li>
<li><p>两阶段锁定协议：</p>
<ul>
<li>指所有并发事务在进行共享数据操作处理时，必须按照两个阶段对共享数据进行加锁申请。在增长阶段，事务可以对共享数据进行加锁申请，但是不能释放已有的锁；在缩减阶段，事务可以对已有的锁进行释放，但是不能对共享数据提出新的加锁申请。</li>
</ul></li>
<li><p>事务的死锁：</p>
<ul>
<li><p>定义：</p>
<p>在事务的并发执行过程中，若这些事务同时锁定两个及以上资源时，可能出现彼此都不能继续执行的状态，称为事务死锁状态</p></li>
<li><p>死锁的必要条件：</p>
<ul>
<li>互斥条件：事务对所分配的资源进行排他性使用，也就是一段时间内某资源只由一个事务占用</li>
<li>请求和保持条件：事务已经保持执照一个资源，但又提出了新的资源请求</li>
<li>不剥夺条件：事务已占有的资源，在未使用完之前，不能被剥夺，只能在使用完自己释放</li>
<li>环路等待条件：指在发生死锁时，必然存在一个事务-资源的等待环路</li>
</ul></li>
<li><p>防范死锁的策略：</p>
<ul>
<li>允许用户一次发出当前所需全部资源的锁定，使用完后再全部释放</li>
<li>规定所有应用程序锁定资源的顺序必须完全相同</li>
</ul></li>
<li><p>解决死锁的方法：</p>
<ul>
<li>当发生死锁时，回滚其中一个事务，并取消它对数据库所做的改动</li>
</ul></li>
<li><p>事务隔离级别：</p>
<ul>
<li>读未提交</li>
<li>读已提交</li>
<li>可重复读</li>
<li>可串行化</li>
</ul>
<p>隔离等级越高，并行度越低，选择何种等级，取决于我们对数据不一致的容忍程度</p></li>
</ul></li>
</ul>
</blockquote>
<h3 id="安全管理">5.3 安全管理</h3>
<blockquote>
<ul>
<li><p>创建角色</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> role <span class="hljs-string">'qy'</span>[@<span class="hljs-string">'%'</span>];<br></code></pre></td></tr></table></figure></li>
<li><p>赋予权限</p></li>
</ul>
<p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> <span class="hljs-keyword">select</span> <span class="hljs-keyword">on</span> db1.<span class="hljs-operator">*</span> <span class="hljs-keyword">to</span> <span class="hljs-string">'qy'</span>;<br></code></pre></td></tr></table></figure></p>
<ul>
<li><p>查看角色权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> grants <span class="hljs-keyword">for</span> <span class="hljs-string">'qy'</span>;<br></code></pre></td></tr></table></figure></li>
<li><p>回收权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">select</span> <span class="hljs-keyword">on</span> db1.<span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'qy'</span><br></code></pre></td></tr></table></figure></li>
<li><p>删除角色</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> role <span class="hljs-string">'qy'</span>;<br></code></pre></td></tr></table></figure></li>
<li><p>用户赋予角色</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> <span class="hljs-string">'qy_role'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">to</span> <span class="hljs-string">'qy_user'</span>@<span class="hljs-string">'%'</span>;<br></code></pre></td></tr></table></figure></li>
<li><p>查看当前用户已激活的角色</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">current_role</span>();<br></code></pre></td></tr></table></figure></li>
<li><p>激活用户</p>
<p>MySQL中创建角色之后默认都是没有被激活，必须手动激活</p>
<ul>
<li><p>方法一：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-keyword">default</span> role <span class="hljs-string">'qy_role'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">to</span> <span class="hljs-string">'qy_user'</span>@<span class="hljs-string">'%'</span>;<br></code></pre></td></tr></table></figure>
<p>执行完需要重新登录</p></li>
<li><p>方法二：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> variables <span class="hljs-keyword">like</span> <span class="hljs-string">'activate_all_roles_on_login'</span>;<br><span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> activate_all_roles_on_login<span class="hljs-operator">=</span><span class="hljs-keyword">ON</span>;<br></code></pre></td></tr></table></figure></li>
</ul></li>
<li><p>收回角色</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">revoke</span> <span class="hljs-string">'qy_role'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'qy_user'</span>@<span class="hljs-string">'%'</span>;<br></code></pre></td></tr></table></figure>
<p>需要重新登录</p></li>
<li><p>设置强制角色</p>
<p>意思是给每个创建的账户设置默认角色，不需要手动设置。强制角色无法<code>revoke</code>或者<code>drop</code></p>
<ul>
<li><p>方式一：</p>
<p>在配置文件中指明</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">[mysqld]<br>mandatory_roles<span class="hljs-operator">=</span><span class="hljs-string">'role1,role2@localhost'</span><br></code></pre></td></tr></table></figure></li>
</ul></li>
</ul>
</blockquote>
<h3 id="数据库备份与恢复">5.4 数据库备份与恢复</h3>
<blockquote>
<p>常见的备份方法：</p>
<ul>
<li>完全数据库备份</li>
<li>差异数据库备份</li>
<li>事务日志备份</li>
<li>文件备份</li>
</ul>
<p>备份分类：</p>
<ul>
<li>冷备份</li>
<li>热备份</li>
</ul>
<p>备份实现和恢复：</p>
<ul>
<li><code>backup database xxx to disk = 'D:\demo.bak';</code></li>
<li><code>restore database xxx from disk = 'D:\demo.bak'</code></li>
</ul>
</blockquote>
<h2 id="六数据库应用编程">六、数据库应用编程</h2>
<h3 id="数据库连接技术">6.1 数据库连接技术</h3>
<blockquote>
<p>ODBC</p>
<ul>
<li>定义：开放式数据库互联(Open DataBase
Connectivity)，实现了应用程序对多种不同DBMS数据库的访问</li>
</ul>
<p>内容：</p>
<ul>
<li>ODBC定义了一套基于SQL的、公共的、与数据库无关的API</li>
</ul>
<p>作用：</p>
<ul>
<li>使每个应用程序利用相同的源代码就可访问不同的数据库系统，从而使得应用程序与DBMS之间存在逻辑上的独立性</li>
</ul>
<p>层次结构：</p>
<ul>
<li>客户端数据库应用程序</li>
<li>ODBC应用程序接口</li>
<li>ODBC驱动程序管理器</li>
</ul>
</blockquote>
<p>JDBC</p>
<blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs sql">package org.example;<br><br>import java.sql.<span class="hljs-operator">*</span>;<br><br>public class Main {<br>    public <span class="hljs-keyword">static</span> void main(String[] args) {<br>        Connection conn <span class="hljs-operator">=</span> <span class="hljs-keyword">null</span>;<br>        Statement stmt <span class="hljs-operator">=</span> <span class="hljs-keyword">null</span>;<br>        String url <span class="hljs-operator">=</span> "jdbc:postgresql://localhost:5432/estatedb";<br>        String username <span class="hljs-operator">=</span> "postgres";<br>        String password <span class="hljs-operator">=</span> "root";<br>        try {<br>            Class.forName("org.postgresql.Driver");<span class="hljs-operator">/</span><span class="hljs-operator">/</span>第一步：加载驱动<br>            conn <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<span class="hljs-operator">/</span><span class="hljs-operator">/</span>第二步：获取连接<br>            System.out.println("success");<br>            stmt <span class="hljs-operator">=</span> (Statement) conn.createStatement();<span class="hljs-operator">/</span><span class="hljs-operator">/</span>第三步：创建Statement对象<br>            String <span class="hljs-keyword">sql</span> <span class="hljs-operator">=</span> "select * from owner";<br>            ResultSet rs <span class="hljs-operator">=</span> stmt.executeQuery(<span class="hljs-keyword">sql</span>);<span class="hljs-operator">/</span><span class="hljs-operator">/</span>第四步：执行<span class="hljs-keyword">SQL</span>语句，获取结果集<br>            System.out.println("Result:");<br>            while (rs.next()) {<br>                System.out.println(rs.getString("PersonID"));<br>            }<br>            rs.close();<br>            stmt.close();<br>            conn.close();<br>        } catch (Exception e) {<br>            System.err.println(e.getClass().getName() <span class="hljs-operator">+</span> ":" <span class="hljs-operator">+</span> e.getMessage());<br>        }<br>    }<br>}<br></code></pre></td></tr></table></figure>
</blockquote>
<h3 id="数据库存储过程">6.2 数据库存储过程</h3>
<h4 id="存储过程">6.2.1 存储过程</h4>
<blockquote>
<p>定义：</p>
<ul>
<li>就是一组经过预先编译的SQL语句的封装，需要调用的时候，用户只需要向服务器发出调用存储过程的命令，服务器就会把这一系列的SQL语句全部执行。</li>
</ul>
<p>好处：</p>
<ul>
<li>减少网络传输量</li>
<li>简化操作，提高SQL语句的重用性</li>
<li>减少操作过程中的失误，提高效率</li>
<li>减少了SQL语句暴露在网络上的风险，提高安全性</li>
</ul>
<p>和视图、函数的对比：</p>
<ul>
<li>视图是虚拟表，通常不对底层数据表直接操作，通常只作查询</li>
<li>存储过程是程序化的SQL</li>
<li>与函数相比，存储过程是没有返回值的</li>
</ul>
<p>存储过程的使用：</p>
<ul>
<li><p>无参数类型</p>
<ul>
<li><p>创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> 存储过程名 (<span class="hljs-keyword">in</span><span class="hljs-operator">|</span><span class="hljs-keyword">out</span><span class="hljs-operator">|</span><span class="hljs-keyword">inout</span> 参数名 参数类型)<br><span class="hljs-keyword">begin</span><br>	xxx;<br><span class="hljs-keyword">end</span> $<br>delimiter ;<br></code></pre></td></tr></table></figure>
<p>若未写<code>in|out|inout</code>，默认为<code>in</code></p></li>
<li><p>调用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">call</span> 存储过程名()<br></code></pre></td></tr></table></figure></li>
</ul></li>
<li><p>带OUT类型</p>
<p><code>into</code></p>
<ul>
<li><p>创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> select_min_salary(<span class="hljs-keyword">out</span> ms <span class="hljs-keyword">double</span>)<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">select</span> <span class="hljs-built_in">min</span>(salary) <span class="hljs-keyword">into</span> ms<br>	<span class="hljs-keyword">from</span> employees<br><span class="hljs-keyword">end</span> $<br>delimiter ;<br></code></pre></td></tr></table></figure></li>
<li><p>调用和查看</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">call</span> select_min_salary(<span class="hljs-variable">@ms</span>)<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@ms</span>;<br></code></pre></td></tr></table></figure></li>
</ul></li>
<li><p>带IN类型</p>
<ul>
<li><p>创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> select_someone_salary(<span class="hljs-keyword">in</span> employeename <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>))<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">select</span> salary<br>	<span class="hljs-keyword">from</span> employees<br>	<span class="hljs-keyword">where</span> name<span class="hljs-operator">=</span>employeename<br><span class="hljs-keyword">end</span> $<br>delimiter ;<br></code></pre></td></tr></table></figure></li>
<li><p>调用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">call</span> select_someone_salary(<span class="hljs-string">'qy'</span>);<br>或者<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@name</span>:<span class="hljs-operator">=</span><span class="hljs-string">'qy'</span>;<br><span class="hljs-keyword">call</span> select_someone_salary(<span class="hljs-variable">@name</span>);<br></code></pre></td></tr></table></figure></li>
</ul></li>
<li><p>带IN和OUT</p>
<ul>
<li><p>创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> select_someone_salary(<span class="hljs-keyword">in</span> employeename <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>),<span class="hljs-keyword">out</span> empsalary <span class="hljs-keyword">double</span>)<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">select</span> salary <span class="hljs-keyword">into</span> empsalary<br>	<span class="hljs-keyword">from</span> employees<br>	<span class="hljs-keyword">where</span> name<span class="hljs-operator">=</span>employeename<br><span class="hljs-keyword">end</span> $<br>delimiter ;<br></code></pre></td></tr></table></figure></li>
<li><p>调用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-variable">@name</span>:<span class="hljs-operator">=</span><span class="hljs-string">'qy'</span>;<br><span class="hljs-keyword">call</span> select_someone_salary(<span class="hljs-variable">@name</span>,<span class="hljs-variable">@emp</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@emp</span>;<br></code></pre></td></tr></table></figure></li>
</ul></li>
<li><p>带INOUT</p>
<ul>
<li><p>创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter $<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> show_mgr_name(<span class="hljs-keyword">inout</span> empname <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>))<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">select</span> empname<br>	<span class="hljs-keyword">from</span> employees t1,employees t2<br>	<span class="hljs-keyword">where</span> t1.manager_id<span class="hljs-operator">=</span>t2.empid<br>	<span class="hljs-keyword">and</span> t1.name<span class="hljs-operator">=</span>empname<br><span class="hljs-keyword">end</span> $<br>delimiter ;<br></code></pre></td></tr></table></figure></li>
<li><p>调用：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-variable">@name</span>:<span class="hljs-operator">=</span><span class="hljs-string">'qy'</span>;<br><span class="hljs-keyword">call</span> select_someone_salary(<span class="hljs-variable">@name</span>);<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@name</span>;<br></code></pre></td></tr></table></figure></li>
</ul></li>
</ul>
</blockquote>
<h4 id="存储函数">6.2.2 存储函数</h4>
<blockquote>
<p>语法分析：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> xxx(参数名 参数类型)<br><span class="hljs-keyword">returns</span> 返回值类型<br>[characteristics]<br><span class="hljs-keyword">begin</span><br>	函数体<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure>
<p>调用存储函数：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 函数名(实参列表)<br></code></pre></td></tr></table></figure>
<p>举例：</p>
<ul>
<li><p>实现</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter <span class="hljs-operator">/</span><span class="hljs-operator">/</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> email_by_name()<br><span class="hljs-keyword">returns</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">25</span>)<br><span class="hljs-keyword">deterministic</span> #返回结果确定<br><span class="hljs-keyword">contains</span> <span class="hljs-keyword">sql</span> # 包含<span class="hljs-keyword">SQL</span><br><span class="hljs-keyword">reads</span> <span class="hljs-keyword">sql</span> data #可以读<span class="hljs-keyword">SQL</span>中的数据<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">return</span> (<span class="hljs-keyword">select</span> email <span class="hljs-keyword">from</span> employees <span class="hljs-keyword">where</span> last_name <span class="hljs-operator">=</span> <span class="hljs-string">'Abel'</span>);<br><span class="hljs-keyword">end</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span><br>delimiter ;<br></code></pre></td></tr></table></figure>
<p>调用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> email_by_name();<br></code></pre></td></tr></table></figure></li>
<li><p>解决方法二：</p>
<p>实现</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> log_bin_trust_function_creators <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>delimiter <span class="hljs-operator">/</span><span class="hljs-operator">/</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> email_by_name()<br><span class="hljs-keyword">returns</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">25</span>)<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">return</span> (<span class="hljs-keyword">select</span> email <span class="hljs-keyword">from</span> employees <span class="hljs-keyword">where</span> last_name <span class="hljs-operator">=</span> <span class="hljs-string">'Abel'</span>);<br><span class="hljs-keyword">end</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span><br>delimiter ;<br></code></pre></td></tr></table></figure>
<p>调用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> email_by_name();<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h4 id="存储过程和存储函数的比较">6.2.3 存储过程和存储函数的比较</h4>
<blockquote>
<table>

<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">关键字</th>
<th style="text-align: center;">调用语法</th>
<th style="text-align: center;">返回值</th>
<th style="text-align: center;">应用场景</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>存储过程</td>
<td style="text-align: center;">procedure</td>
<td style="text-align: center;">call 存储过程()</td>
<td style="text-align: center;">理解为可以有0或者多个</td>
<td style="text-align: center;">一般用于更新</td>
</tr>
<tr class="even">
<td>存储函数</td>
<td style="text-align: center;">function</td>
<td style="text-align: center;">select 函数()</td>
<td style="text-align: center;">只能是1个</td>
<td style="text-align: center;">一般用于查询结果为一个值并返回时</td>
</tr>
</tbody>
</table>
<p>存储函数可以放在查询语句中使用，存储过程不行</p>
</blockquote>
<h4 id="存储过程和函数的查看修改和删除">6.2.4
存储过程和函数的查看修改和删除</h4>
<blockquote>
<ul>
<li><p>查看</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">查看创建信息：<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> xxx<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> xxx<br>查看状态信息：<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">procedure</span> status [<span class="hljs-keyword">like</span> xxx]<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">function</span> status [<span class="hljs-keyword">like</span> xxx]<br>从元数据表查看<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> information_schema.Routines <span class="hljs-keyword">where</span> ROUTINE_NAME<span class="hljs-operator">=</span><span class="hljs-string">'存储过程或函数的名'</span> [<span class="hljs-keyword">and</span> ROUTINE_TYPE <span class="hljs-operator">=</span> <span class="hljs-string">'FUNCTION/PROCEDURE'</span>(必须大写)]<br></code></pre></td></tr></table></figure></li>
<li><p>修改(不能修改函数体，只能改一些属性) <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">procedure</span> xxx<br>comment <span class="hljs-string">'这是注释'</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">function</span> xxx<br>comment <span class="hljs-string">'这是注释'</span><br></code></pre></td></tr></table></figure></p></li>
<li><p>删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">procedure</span> xxx [if <span class="hljs-keyword">exists</span> xxx]<br><span class="hljs-keyword">drop</span> <span class="hljs-keyword">function</span> xxx [if <span class="hljs-keyword">exists</span> xxx]<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h4 id="相关争议">6.2.5 相关争议</h4>
<blockquote>
<p>优点：</p>
<ul>
<li>存储过程可以一点编译多次使用，执行效率高</li>
<li>可以减少开发工作量</li>
<li>存储过程的安全性强</li>
<li>可以减少网络传输量</li>
<li>良好的封装性</li>
</ul>
<p>微软，IBM等大型公司都要求大型项目使用存储过程</p>
<p>缺点：</p>
<ul>
<li>可移植性差，不能夸数据库移植</li>
<li>调试困难</li>
<li>存储过程的版本管理很困难</li>
<li>不适合高并发的场景</li>
</ul>
<p>阿里明确禁止使用存储过程</p>
</blockquote>
<h4 id="变量">6.2.6 变量</h4>
<blockquote>
<ul>
<li><p>系统变量</p>
<ul>
<li><p>全局系统变量</p>
<p>被<code>global</code>修饰，又称全局变量，全局系统变量会在重启后重新赋值</p></li>
<li><p>会话系统变量</p>
<p>被<code>session</code>修饰，又称local变量，对一次会话有效</p></li>
</ul>
<p>操作：</p>
<ul>
<li><p>查看</p>
<p>MySQL中的系统变量以两个<code>@</code>开头，<code>@@</code>首先标记会话系统变量，若不存在，标记全局系统变量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">查看所有或部分系统变量<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">global</span> variables [<span class="hljs-keyword">like</span> xxx]<br><span class="hljs-keyword">show</span> session variables [<span class="hljs-keyword">like</span> xxx]<br><span class="hljs-keyword">show</span> variables; # 默认查询session变量<br>查看指定系统变量：<br><span class="hljs-keyword">select</span> @<span class="hljs-variable">@global</span>.xxx<br><span class="hljs-keyword">select</span> @<span class="hljs-variable">@session</span>.xxx<br><span class="hljs-keyword">select</span> @<span class="hljs-variable">@xxx</span><br></code></pre></td></tr></table></figure></li>
<li><p>修改</p>
<ul>
<li><p>方式一：修改配置文件，但是需要重启MySQL服务</p></li>
<li><p>方式二：使用set命令</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">对于系统变量：<br><span class="hljs-keyword">set</span> @<span class="hljs-variable">@global</span>.xxx<span class="hljs-operator">=</span>yyy<br><span class="hljs-keyword">set</span> <span class="hljs-keyword">global</span> xxx<span class="hljs-operator">=</span>yyy<br>对于会话变量：<br><span class="hljs-keyword">set</span> @<span class="hljs-variable">@session</span>.xxx<span class="hljs-operator">=</span>yyy<br><span class="hljs-keyword">set</span> session xxx<span class="hljs-operator">=</span>yyy<br></code></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li><p>用户变量</p>
<p>MySQL中的用户变量以一个<code>@</code>开头，一般只在会话用户变量前加上<code>@</code>，局部变量不用</p>
<ul>
<li><p>会话用户变量：只对当前连接有效</p>
<ul>
<li><p>定义</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">方式一："="或":="<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@xxx</span><span class="hljs-operator">=</span>yyy<br><span class="hljs-keyword">set</span> <span class="hljs-variable">@xxx</span>:<span class="hljs-operator">=</span>yyy<br>方式二：":="或 <span class="hljs-keyword">INTO</span>关键字<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@xxx</span> :<span class="hljs-operator">=</span> 表达式<br><span class="hljs-keyword">select</span> 表达式 <span class="hljs-keyword">into</span> <span class="hljs-variable">@xxx</span><br></code></pre></td></tr></table></figure></li>
<li><p>举例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">set</span> <span class="hljs-variable">@xxx</span><span class="hljs-operator">=</span><span class="hljs-number">123</span>;<br><span class="hljs-keyword">select</span> <span class="hljs-variable">@xxx</span>;<br></code></pre></td></tr></table></figure>
<ul>
<li>局部变量：只在<code>begin</code>和<code>end</code>语句块中有效，局部变量只能在存储过程和函数中使用</li>
</ul></li>
<li><p>定义</p>
<p>使用<code>declare</code>定义，而且必须放在第一句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">begin</span><br> <span class="hljs-keyword">declare</span> xxx <span class="hljs-type">int</span> [<span class="hljs-keyword">default</span> xxx] # 声明<br> #赋值<br> <span class="hljs-keyword">set</span> xxx<span class="hljs-operator">=</span>yyy;<br> <span class="hljs-keyword">select</span> <span class="hljs-keyword">value</span> <span class="hljs-keyword">into</span> xxx;<br> #查看<br> <span class="hljs-keyword">select</span> xxx;<br> <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure></li>
<li><p>举例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"> delimiter <span class="hljs-operator">/</span><span class="hljs-operator">/</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">procedure</span> myProcedure()<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">declare</span> name <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>);<br><span class="hljs-keyword">declare</span> sex <span class="hljs-type">char</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">default</span> <span class="hljs-string">'男'</span>;<br><span class="hljs-keyword">set</span> name<span class="hljs-operator">=</span><span class="hljs-string">'qy'</span><br><span class="hljs-keyword">select</span> sexInfo <span class="hljs-keyword">into</span> sex <span class="hljs-keyword">where</span> empName<span class="hljs-operator">=</span>name;<br><span class="hljs-keyword">end</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span><br>delimiter ;<br></code></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li><p>如何区分局部变量和会话用户变量</p>
<ul>
<li>局部变量必须通过<code>declare</code>声明</li>
<li>局部变量必须声明并使用在<code>begin ... end ...中</code></li>
<li><code>declare</code>必须放在首行</li>
<li>会话用户变量并没有指明类型，但是局部变量需要指明</li>
</ul></li>
</ul>
</blockquote>
<h3 id="数据库触发器">6.3 数据库触发器</h3>
<blockquote>
<p>触发器是由事件来触发某个操作，这些事件包括<code>insert update delete</code></p>
<ul>
<li><p>创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql">delimiter <span class="hljs-operator">/</span><span class="hljs-operator">/</span><br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> 触发器名称<br>{before<span class="hljs-operator">|</span>after} {<span class="hljs-keyword">insert</span><span class="hljs-operator">|</span><span class="hljs-keyword">update</span><span class="hljs-operator">|</span><span class="hljs-keyword">delete</span>} <span class="hljs-keyword">on</span> 表名<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br><span class="hljs-keyword">begin</span><br>触发器执行的语句块(也可以是begin...end结构组成的附和语句块);<br><span class="hljs-keyword">end</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span><br>delimiter ;<br></code></pre></td></tr></table></figure></li>
<li><p>查看</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql">方式一：查看所有触发器<br><span class="hljs-keyword">show</span> triggers;<br>方式二：查看某个触发器<br><span class="hljs-keyword">show</span> <span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> xxx<br>方式三：从元数据表查询<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> information_schema.TRIGGERS;<br></code></pre></td></tr></table></figure></li>
<li><p>删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">trigger</span> if <span class="hljs-keyword">exists</span> xxx;<br></code></pre></td></tr></table></figure></li>
</ul>
<p>优点：</p>
<ul>
<li>保证数据的完整性</li>
<li>帮助我们记录日志</li>
<li>对操作数据前，对数据进行合法性检查</li>
</ul>
<p>缺点：</p>
<ul>
<li>可读性差(应用层不可控)</li>
<li>相关数据的变更，可能会导致触发器报错</li>
</ul>
</blockquote>
<h3 id="数据库游标">6.4 数据库游标</h3>
<blockquote>
<p>使用游标的步骤：</p>
<ul>
<li><p>声明游标：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">declare</span> cursor_name <span class="hljs-keyword">cursor</span> <span class="hljs-keyword">for</span> select_statement; <span class="hljs-comment">-- mysql</span><br><span class="hljs-keyword">declare</span> cursor_name <span class="hljs-keyword">cursor</span> <span class="hljs-keyword">is</span> select_statement; <span class="hljs-comment">-- postgresql</span><br></code></pre></td></tr></table></figure></li>
<li><p>打开游标：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">open</span> cursor_name;<br></code></pre></td></tr></table></figure></li>
<li><p>使用游标：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">fetch</span> cursor_name <span class="hljs-keyword">into</span> 变量名<span class="hljs-number">1</span>，变量名<span class="hljs-number">2.</span>..变量名n<br></code></pre></td></tr></table></figure></li>
<li><p>关闭游标</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">close</span> <span class="hljs-keyword">cursor</span>;<br></code></pre></td></tr></table></figure></li>
</ul>
<p>示例：</p>
<ul>
<li><p>不带参数的游标：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> replace <span class="hljs-keyword">function</span> cursor_demo()<br>    <span class="hljs-keyword">returns</span> void <span class="hljs-keyword">as</span><br>$$<br><span class="hljs-keyword">declare</span><br>    my_cursor refcursor;<br>    tmp_id text;<br>    tmp_name text;<br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">open</span> my_cursor <span class="hljs-keyword">for</span> <span class="hljs-keyword">execute</span> <span class="hljs-string">'select "PersonID","Name" from owner'</span>;<span class="hljs-comment">-- 打开游标</span><br>    loop<br>        <span class="hljs-keyword">fetch</span> my_cursor <span class="hljs-keyword">into</span> tmp_id,tmp_name;<br>        if FOUND <span class="hljs-keyword">then</span><br>            raise notice <span class="hljs-string">'%,%'</span>,tmp_id,tmp_name;<br>        <span class="hljs-keyword">else</span><br>            exit;<br>        <span class="hljs-keyword">end</span> if;<br>    <span class="hljs-keyword">end</span> loop;<br>    <span class="hljs-keyword">close</span> my_cursor;<br>    raise notice <span class="hljs-string">'finished...'</span>;<br><span class="hljs-keyword">end</span>;<br>$$ <span class="hljs-keyword">language</span> plpgsql;<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> cursor_demo();<br></code></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> replace <span class="hljs-keyword">function</span> cursor_demo()<br>    <span class="hljs-keyword">returns</span> void <span class="hljs-keyword">as</span><br>$$<br><span class="hljs-keyword">declare</span><br>    my_cursor <span class="hljs-keyword">cursor</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">select</span> "PersonID", "Name"<br>                         <span class="hljs-keyword">from</span> owner;<br>    tmp_id   text;<br>    tmp_name text;<br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">open</span> my_cursor;<span class="hljs-comment">-- 打开游标</span><br>    loop<br>        <span class="hljs-keyword">fetch</span> my_cursor <span class="hljs-keyword">into</span> tmp_id,tmp_name;<br>        if FOUND <span class="hljs-keyword">then</span><br>            raise notice <span class="hljs-string">'%,%'</span>,tmp_id,tmp_name;<br>        <span class="hljs-keyword">else</span><br>            exit;<br>        <span class="hljs-keyword">end</span> if;<br>    <span class="hljs-keyword">end</span> loop;<br>    <span class="hljs-keyword">close</span> my_cursor;<br>    raise notice <span class="hljs-string">'finished...'</span>;<br><span class="hljs-keyword">end</span>;<br>$$ <span class="hljs-keyword">language</span> plpgsql;<br></code></pre></td></tr></table></figure></li>
<li><p>带参数的游标：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> replace <span class="hljs-keyword">function</span> cursor_demo2(tmp_id text)<br>    <span class="hljs-keyword">returns</span> void <span class="hljs-keyword">as</span><br>$$<br><span class="hljs-keyword">declare</span><br>    my_owner owner<span class="hljs-operator">%</span>rowtype;<br>    my_cursor <span class="hljs-keyword">cursor</span> (tmp_id_ text) <span class="hljs-keyword">for</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br>                                        <span class="hljs-keyword">from</span> owner<br>                                        <span class="hljs-keyword">where</span> "PersonID" <span class="hljs-operator">=</span> tmp_id_;<br><span class="hljs-keyword">begin</span><br>    <span class="hljs-keyword">open</span> my_cursor(tmp_id);<br>    loop<br>        <span class="hljs-keyword">fetch</span> my_cursor <span class="hljs-keyword">into</span> my_owner;<br>        if <span class="hljs-keyword">not</span> found <span class="hljs-keyword">then</span><br>            exit;<br>        <span class="hljs-keyword">else</span><br>            raise notice <span class="hljs-string">'found!--&gt;%,%'</span>,my_owner."PersonID",my_owner."Name";<br>        <span class="hljs-keyword">end</span> if;<br>    <span class="hljs-keyword">end</span> loop;<br>    <span class="hljs-keyword">close</span> my_cursor;<br><span class="hljs-keyword">end</span>;<br>$$ <span class="hljs-keyword">language</span> plpgsql;<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h2 id="七nosql">七、NoSQL</h2>
<h3 id="nosql数据库概述">7.1 NoSQL数据库概述</h3>
<blockquote>
<p>关系数据库的局限：</p>
<ul>
<li>数据库高并发读写需求难以满足</li>
<li>数据的高效存储和处理</li>
<li>数据库的高拓展性和高可用性需求</li>
<li>大数据处理需求</li>
</ul>
<p>常见NoSQL数据库：</p>
<ul>
<li><p>键值(key/value)存储数据库</p>
<ul>
<li><p>介绍：</p>
<p>这一类数据库会用到一个哈希表，表中有一个特定的键和指针指向的数据</p></li>
<li><p>优点：</p>
<ul>
<li>查找速度快</li>
<li>简单，易部署</li>
</ul></li>
<li><p>缺点：</p>
<ul>
<li>数据无结构化，通常只被当做字符串或二进制数据</li>
<li>如果只对部分值进行查询或更新的时候，key/value显得效率低下</li>
</ul></li>
<li><p>应用场景：</p>
<ul>
<li>内容缓存，主要用于处理大量数据的高访问负载</li>
<li>也用于一些日志系统</li>
</ul></li>
<li><p>举例：</p>
<p>Redis，Oracle BDB，Tokyo，Voldmort</p></li>
</ul></li>
<li><p>列存储数据库</p>
<ul>
<li><p>介绍：</p>
<p>主要用来应对分布式存储的海量数据，键仍然存在，但是它们的特点是指向了多个列，这些列是由列家族来安排的</p></li>
<li><p>优点：</p>
<ul>
<li>查找速度快</li>
<li>可拓展性强，更容易进行分布式扩展</li>
</ul></li>
<li><p>缺点：</p>
<ul>
<li>功能相对哦局限</li>
</ul></li>
<li><p>应用场景：</p>
<ul>
<li>分布式的文件系统</li>
</ul></li>
<li><p>举例：</p>
<p>HBase，Riak，Cassandra</p></li>
</ul></li>
<li><p>文档型数据库</p>
<ul>
<li><p>介绍：</p>
<p>该类型的数据模型是版本化的文档，半结构化的文档以特定的格式存储。文档型数据库可以看做是键值数据库的升级版，允许之间嵌套键值，而却文档型数据库比键值数据库的查询效率高</p></li>
<li><p>优点：</p>
<ul>
<li>数据结构要求不严格，表结构可变，不需要像关系型数据库一样需要预先定义表结构</li>
</ul></li>
<li><p>缺点：</p>
<ul>
<li>查询性能不高，而且缺乏统一的语法</li>
</ul></li>
<li><p>应用场景：</p>
<ul>
<li>与Key/value类似，Value是结构化的，不同的数据库能够了解Value的内容</li>
</ul></li>
<li><p>举例：</p>
<p>MongoDB，CouchDB</p></li>
</ul></li>
<li><p>图形数据库</p>
<ul>
<li><p>介绍：</p>
<p>图形结构的数据库同其他行列以及刚性结构的SQL数据库不同，它是使用领过的图形数据库，并且能够拓展到多个服务器上</p></li>
<li><p>优点：</p>
<ul>
<li>利用图结构相关算法，比如最短路径寻址，N度关系查找等</li>
</ul></li>
<li><p>缺点：</p>
<ul>
<li>很多时候需要对整个图像计算才能得出需要的信息，而且这种结构不太好做分布式的集群方案</li>
</ul></li>
<li><p>应用场景：</p>
<ul>
<li>社交网络，推荐系统，专注于构建关系图谱</li>
</ul></li>
<li><p>举例：</p>
<p>Neo4J，InfoGrid，Infinite Graph</p></li>
</ul></li>
</ul>
</blockquote>
<h2 id="八postgresql补充">八、Postgresql补充</h2>
<h3 id="命令行常见参数">8.1 命令行常见参数</h3>
<blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">\l 查看所有数据库<br>\c 连接某个数据库<br>\d 查看当前所有表<br>\d xxx 查看xxx表的创建信息<br>\du 查看所有用户<span class="hljs-operator">/</span>角色<br>\df 查看所有存储过程<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> pg_trigger; 查看所有触发器<br></code></pre></td></tr></table></figure>
</blockquote>
<h3 id="函数">8.2 函数</h3>
<blockquote>
<p>postgresql将存储过程和函数合并在一起，称为<code>function</code>；在postgresql
11开始引入<code>procedure</code></p>
<ul>
<li><p>语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> xxx()<br><span class="hljs-keyword">returns</span> <span class="hljs-type">integer</span> <span class="hljs-keyword">as</span> $$<br><span class="hljs-keyword">declare</span><br>	xxx<br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">end</span>;<br>$$ <span class="hljs-keyword">language</span> plpgsql<br>或者是下面这种形式<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">function</span> qqq(<span class="hljs-keyword">out</span> a)<br><span class="hljs-keyword">as</span> $$<br><span class="hljs-keyword">declare</span><br><span class="hljs-keyword">begin</span><br><span class="hljs-keyword">end</span>;<br>$$ <span class="hljs-keyword">language</span> plpgsql;<br></code></pre></td></tr></table></figure>
<ul>
<li><code>argmode</code>：<code>IN OUT INOUT]</code>，默认为<code>IN</code></li>
</ul></li>
<li><p>例子</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">or</span> replace <span class="hljs-keyword">function</span> countRecords()<br><span class="hljs-keyword">returns</span> <span class="hljs-type">integer</span> <span class="hljs-keyword">as</span> $$<br><span class="hljs-keyword">declare</span><br>	count <span class="hljs-type">integer</span>;<br><span class="hljs-keyword">begin</span><br>	<span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">into</span> count <span class="hljs-keyword">from</span> student;<br>	<span class="hljs-keyword">return</span> count;<br><span class="hljs-keyword">end</span>;<br>$$ <span class="hljs-keyword">language</span> plpgsql<br></code></pre></td></tr></table></figure></li>
<li><p>执行存储过程</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> 存储过程名();<br>或者<br><span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> 存储过程名();<br></code></pre></td></tr></table></figure></li>
<li><p>如果需要一个存储过程调用另一个存储过程</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">into</span> 自定义变量 <span class="hljs-keyword">from</span> 存储过程名(参数);<br>若不关心返回值：<br>perform 存错过程名(参数)<br></code></pre></td></tr></table></figure></li>
<li><p>删除存储过程</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">function</span> if <span class="hljs-keyword">exists</span> name(argmode argname argtype) [cascade<span class="hljs-operator">|</span>restrict]<br></code></pre></td></tr></table></figure>
<p>注意：实际上并不注意参数的名字，因为判断函数的身份只需要输入参数的数据类型</p>
<p><code>cascade</code>：级联删除依赖于存储过程的对象，比如触发器</p>
<p><code>restrict</code>：若有任何依赖对象在，则拒绝删除该函数，这个为缺省值</p></li>
<li><p>PL/SQL基本语法</p>
<ul>
<li><p>声明局部变量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">declare</span><br>	变量名 变量类型<br>若声明变量为记录类型，变量类型为record，record不是真正的数据类型，只是一个占位符<br></code></pre></td></tr></table></figure></li>
<li><p>条件语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs sql">if xxx <span class="hljs-keyword">then</span><br>	statements<br><span class="hljs-keyword">end</span> if;<br>或者<br>if xxx <span class="hljs-keyword">then</span><br>	statements<br><span class="hljs-keyword">else</span><br>	statements<br><span class="hljs-keyword">end</span> if;<br>或者<br>if xxx <span class="hljs-keyword">then</span><br>	statements<br>elsif yyy <span class="hljs-keyword">then</span><br>	statements<br>elsif zzz <span class="hljs-keyword">then</span><br>	statements<br><span class="hljs-keyword">else</span><br>	statements<br><span class="hljs-keyword">end</span> if;<br></code></pre></td></tr></table></figure></li>
<li><p>循环语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs sql">loop<br>	statements<br>	continue <span class="hljs-keyword">when</span> xxx<br>	exit [label] <span class="hljs-keyword">when</span> expression<br><span class="hljs-keyword">end</span> loop<br><br>或者<br>while expression loop<br>	statements<br><span class="hljs-keyword">end</span> loop;<br><br>或者<br><span class="hljs-keyword">for</span> name <span class="hljs-keyword">in</span> [reverse] expression...expression<br>loop<br>	statements<br><span class="hljs-keyword">end</span> loop<br>比如<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span>.<span class="hljs-number">.10</span><br>	raise notice i<br><span class="hljs-keyword">end</span> loop;<br><br>遍历命令结果<br><span class="hljs-keyword">for</span> record <span class="hljs-keyword">in</span> xxx loop<br>	statements<br><span class="hljs-keyword">end</span> loop;<br></code></pre></td></tr></table></figure></li>
<li><p>优点</p>
<ul>
<li>减少网络通信量</li>
<li>执行速度快</li>
<li>更强的适应性</li>
<li>降低了业务实现与应用程序的耦合</li>
<li>降低了开发的复杂性</li>
<li>保护了数据库元信息</li>
</ul></li>
<li><p>缺点：</p>
<ul>
<li>过程化处理逻辑相对比较复杂</li>
<li>若存储过程的参数或返回数据发生变化，一般需要修改存储过程的代码</li>
<li>调试复杂</li>
<li>可移植性差</li>
</ul></li>
</ul></li>
</ul>
</blockquote>
<h3 id="触发器">8.3 触发器</h3>
<blockquote>
<ul>
<li><p>触发器的分类：</p>
<ul>
<li><p>按照执行次数</p>
<ul>
<li>语句级触发器：<code>for each statement</code></li>
<li>行级触发器：<code>for each row</code></li>
</ul></li>
<li><p>按照触发时间</p>
<ul>
<li><p><code>before</code>触发器</p></li>
<li><p><code>after</code>触发器</p></li>
<li><p><code>instead of</code>触发器：当触发时间发生后，执行触发器而不是执行产生触发事件的SQL语句</p>
<p>对于<code>insert update delete</code>三种触发事件，每种最多定义一个<code>instead of</code>触发器</p></li>
</ul></li>
</ul></li>
<li><p>触发器相关的特殊变量：</p>
<ul>
<li><p><code>new</code></p>
<p>数据类型是<code>record</code>(标识一个函数返回一个未声明的行变量)，存有<code>insert</code>或<code>update</code>操作产生的新的数据行，对于语句级触发器，值是<code>null</code></p></li>
<li><p><code>old</code></p>
<p>数据类型是<code>record</code>，存有<code>delete</code>或<code>update</code>操作产生的旧的数据行，对于语句级触发器，值是<code>null</code></p></li>
<li><p><code>tg_op</code></p>
<p>数据类型是<code>text</code>，值是<code>insert</code>、<code>update</code>、<code>delete</code>的一个字符串，表明触发器是为哪个操作引发的</p></li>
</ul></li>
<li><p>基本语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> qqq<br>[before <span class="hljs-operator">|</span> after <span class="hljs-operator">|</span> instead <span class="hljs-keyword">of</span>] [after <span class="hljs-operator">|</span> <span class="hljs-keyword">insert</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">delete</span>  ]<br><span class="hljs-keyword">on</span> 表名<br>[<span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><span class="hljs-operator">|</span><span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> statement]<br><span class="hljs-keyword">execute</span> <span class="hljs-keyword">procedure</span> 存储过程名(参数列表)<br>比如<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">trigger</span> qqq()<br>before <span class="hljs-keyword">insert</span> <span class="hljs-keyword">on</span> books<br><span class="hljs-keyword">for</span> <span class="hljs-keyword">each</span> <span class="hljs-type">row</span><br>excute <span class="hljs-keyword">procedure</span> 存储过程名()<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h3 id="安全">8.4 安全</h3>
<h4 id="用户相关操作">8.4.1 用户相关操作</h4>
<blockquote>
<ul>
<li><p>用户/角色创建</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span><span class="hljs-operator">/</span>role qy <span class="hljs-keyword">with</span><br>login<br>nosuperuser <span class="hljs-comment">-- 不是超级用户</span><br>nocreatedb <span class="hljs-comment">-- 不能创建数据库</span><br>nocreaterole <span class="hljs-comment">-- 不能创建角色</span><br>inherit <span class="hljs-comment">-- 有角色继承权限</span><br>noreplication <span class="hljs-comment">-- 没有数据库复制权限</span><br>connection limit <span class="hljs-number">-1</span> <span class="hljs-comment">-- 数据库连接数不受限</span><br>password <span class="hljs-string">'123'</span><br></code></pre></td></tr></table></figure></li>
<li><p>用户/角色修改语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span><span class="hljs-operator">/</span>role qy xxx <span class="hljs-comment">-- 修改用户属性</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span><span class="hljs-operator">/</span>role qy rename <span class="hljs-keyword">to</span> xxx <span class="hljs-comment">-- 修改用户名称</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span><span class="hljs-operator">/</span>role qy <span class="hljs-keyword">set</span> xxx<span class="hljs-operator">=</span>yyy <span class="hljs-comment">-- 修改用户的参数值</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span><span class="hljs-operator">/</span>role qy reset xxx <span class="hljs-comment">-- 重置用户=参数值</span><br></code></pre></td></tr></table></figure>
<p>例子：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span><span class="hljs-operator">/</span>role qy<br>connection limit <span class="hljs-number">10</span><br>password <span class="hljs-string">'123'</span><br></code></pre></td></tr></table></figure></li>
<li><p>用户删除语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">user</span><span class="hljs-operator">/</span>role yq<br></code></pre></td></tr></table></figure></li>
<li><p>在创建用户的同时赋予某个用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">user</span> qy <span class="hljs-keyword">with</span><br><span class="hljs-keyword">in</span> role qy_role<br>password <span class="hljs-string">'123'</span>;<br></code></pre></td></tr></table></figure></li>
<li><p>将某个角色赋予某个用户</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> role1 <span class="hljs-keyword">to</span> user1;<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h4 id="权限相关操作">8.4.2 权限相关操作</h4>
<blockquote>
<ul>
<li><p>授予权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">grant</span> <span class="hljs-keyword">select</span> <span class="hljs-keyword">on</span> sales <span class="hljs-keyword">to</span> qy;<br></code></pre></td></tr></table></figure></li>
<li><p>收回权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">revoke</span> <span class="hljs-keyword">select</span> <span class="hljs-keyword">on</span> sales <span class="hljs-keyword">to</span> qy;<br></code></pre></td></tr></table></figure></li>
<li><p>拒绝权限</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">deny <span class="hljs-keyword">update</span> <span class="hljs-keyword">on</span> sales <span class="hljs-keyword">to</span> qy;<br></code></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<h2 id="九mysql其它操作">九、Mysql其它操作</h2>
<h3 id="导入和导出">9.1 导入和导出</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 导出</span><br>mysqldump -u root -p ctfd &gt; ctfData.sql<br><span class="hljs-comment"># 导入</span><br>mysql -uroot -proot -D ctfd &lt; ctfData.sql<br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Courses/" class="category-chain-item">Courses</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8/" class="print-no-link">#数据库原理及应用</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>数据库原理及应用</div>
      <div>https://d4wnnn.github.io/2023/02/28/Courses/数据库原理及应用/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>D4wn</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年2月28日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/03/01/Courses/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" title="操作系统">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">操作系统</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/01/12/Dev/Go/" title="Go">
                        <span class="hidden-mobile">Go</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.5.1/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"iQzcdzgtk7S3lKyzUoT3segU-gzGzoHsz","appKey":"mL1QjUEvvzJ9E2xIVz0OuJuj","path":"window.location.pathname","placeholder":"Hello","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"https://iqzcdzgt.lc-cn-n1-shared.com","emojiCDN":"https://valinecdn.bili33.top/","emojiMaps":{"QQ1":"QQ/aini.gif","QQ2":"QQ/aixin.gif","QQ3":"QQ/aoman.gif","QQ4":"QQ/baiyan.gif","QQ5":"QQ/bangbangtang.gif","QQ6":"QQ/baojin.gif","QQ7":"QQ/baoquan.gif","QQ8":"QQ/bishi.gif","QQ9":"QQ/bizui.gif","QQ11":"QQ/cahan.gif","QQ12":"QQ/caidao.gif","QQ13":"QQ/chi.gif","QQ14":"QQ/ciya.gif","QQ15":"QQ/dabing.gif","QQ16":"QQ/daku.gif","QQ17":"QQ/dan.gif","QQ18":"QQ/deyi.gif","QQ19":"QQ/doge.gif","QQ20":"QQ/fadai.gif","QQ21":"QQ/fanu.gif","QQ22":"QQ/fendou.gif","QQ23":"QQ/ganga.gif","QQ24":"QQ/gouyin.gif","QQ25":"QQ/guzhang.gif","QQ26":"QQ/haixiu.gif","QQ27":"QQ/hanxiao.gif","QQ28":"QQ/haobang.gif","QQ29":"QQ/haqian.gif","QQ30":"QQ/hecai.gif","QQ31":"QQ/hexie.gif","QQ32":"QQ/huaixiao.gif","QQ33":"QQ/jie.gif","QQ34":"QQ/jingkong.gif","QQ35":"QQ/jingxi.gif","QQ36":"QQ/jingya.gif","QQ37":"QQ/juhua.gif","QQ38":"QQ/keai.gif","QQ39":"QQ/kelian.gif","QQ40":"QQ/koubi.gif","QQ41":"QQ/ku.gif","QQ42":"QQ/kuaikule.gif","QQ43":"QQ/kulou.gif","QQ44":"QQ/kun.gif","QQ45":"QQ/lanqiu.gif","QQ46":"QQ/leiben.gif","QQ47":"QQ/lenghan.gif","QQ48":"QQ/liuhan.gif","QQ49":"QQ/liulei.gif","QQ50":"QQ/nanguo.gif","QQ51":"QQ/OK.gif","QQ52":"QQ/penxue.gif","QQ53":"QQ/piezui.gif","QQ54":"QQ/pijiu.gif","QQ55":"QQ/qiang.gif","QQ56":"QQ/qiaoda.gif","QQ57":"QQ/qinqin.gif","QQ58":"QQ/qiudale.gif","QQ59":"QQ/quantou.gif","QQ60":"QQ/saorao.gif","QQ61":"QQ/se.gif","QQ62":"QQ/shengli.gif","QQ63":"QQ/shouqiang.gif","QQ64":"QQ/shuai.gif","QQ65":"QQ/shui.gif","QQ66":"QQ/tiaopi.gif","QQ67":"QQ/touxiao.gif","QQ68":"QQ/tu.gif","QQ69":"QQ/tuosai.gif","QQ70":"QQ/weiqu.gif","QQ71":"QQ/weixiao.gif","QQ72":"QQ/woshou.gif","QQ73":"QQ/wozuimei.gif","QQ74":"QQ/wunai.gif","QQ75":"QQ/xia.gif","QQ76":"QQ/xiaojiujie.gif","QQ77":"QQ/xiaoku.gif","QQ78":"QQ/xiaoyanger.gif","QQ79":"QQ/xieyanxiao.gif","QQ80":"QQ/xigua.gif","QQ81":"QQ/xu.gif","QQ82":"QQ/yangtuo.gif","QQ83":"QQ/yinxian.gif","QQ84":"QQ/yiwen.gif","QQ85":"QQ/youhengheng.gif","QQ86":"QQ/youling.gif","QQ87":"QQ/yun.gif","QQ88":"QQ/zaijian.gif","QQ89":"QQ/zhayanjian.gif","QQ90":"QQ/zhemo.gif","QQ91":"QQ/zhouma.gif","QQ92":"QQ/zhuakuang.gif","QQ93":"QQ/zuohengheng.gif"},"enableQQ":true},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://github.com/d4wnnn" target="_blank" rel="nofollow noopener"><span>Github</span></a> <i class="iconfont icon-love"></i> <a href="tencent://message/?uin=2638177031" target="_blank" rel="nofollow noopener"><span>联系我</span></a> <div> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body>
</html>
